/*!
* flagwind-map v1.0.1 
* 
* Authors:
*      chendebao <hbchendb1985@gmail.com>
* 
* Licensed under the MIT License.
* Copyright (C) 2018-2018 Flagwind Inc. All rights reserved. 
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.flagwind={})}(this,function(exports){"use strict";var __extends=this&&this.__extends||(a7520=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}a7520(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a7520,__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},flagwind,flagwind,a7613,a7614,a7622,flagwind,a7656,a7657,flagwind,flagwind,a7794,a7795,flagwind,a7848,a7849,flagwind,a7914,a7915,flagwind,a7983,a7984,flagwind,a7997,a7998,flagwind,flagwind,a8103,a8104,flagwind,a8197,a8198,flagwind,a8272,a8273,flagwind,flagwind,a8521,a8522,flagwind,flagwind,a8650,a8651,flagwind,a8666,a8667,flagwind,a8680,a8681,flagwind,flagwind,a8779,a8780,flagwind,flagwind,flagwind,flagwind,a8902,a8903,flagwind,a9082,a9083,flagwind,a9092,a9093,flagwind,a9103,a9104,flagwind,a9152,a9153,flagwind,a9209,a9210,flagwind,a9224,a9225,flagwind,a9235,a9236,flagwind,a9248,a9249,flagwind,a9256,a9257,flagwind,a9264,a9265,flagwind,a9272,a9273,flagwind,a9292,a9293,flagwind,a9331,a9332,flagwind,a9354,a9355,flagwind,a9374,a9375,flagwind,flagwind,a9523,a9524,flagwind,a9539,a9540,flagwind,a9597,a9598,flagwind,a9661,a9662,flagwind,a9724,a9725,flagwind,a9744,a9745,flagwind,a9766,a9767,flagwind,flagwind,flagwind,a9921,a9922,flagwind,a9939,a9940,flagwind,a9945,a9946,flagwind;!function(t){var e=function(){return function(){}}();t.Animation=e;var i=function(t){function e(e,i,n){var o=t.call(this)||this;return o.graphic=i,o.options=n,o.attributes=e,o.graphic=i,o._id=e.id,o._alpha=1,o._fadeIn=!1,o.options=n,o}return __extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.updateGraphic=function(){this._fadeIn?(this._alpha+=.01,this._alpha>=1&&(this._alpha=1,this._fadeIn=!1)):(this._alpha-=.01,this._alpha<=0&&(this._alpha=0,this._fadeIn=!0));var t=this.getSymbol(),e=this.getColor();e.push(this._alpha),t.setColor(e),this.graphic.setSymbol(t),this.graphic.draw()},e.prototype.getSymbol=function(){var t=new esri.symbol.SimpleMarkerSymbol;return t.setPath(this.options.path),t.setSize(this.options.size),t.setColor(new dojo.Color(this.getColor())),t.setOutline(null),t},e.prototype.getColor=function(){var t=this.options.color;return t||(t=this.options.getColor(this.attributes)),t.length>3&&t.splice(3,1),t},e}(e);t.LightingAnimation=i;var n=function(t){function e(e,i,n){var o=t.call(this)||this;return o.graphic=i,o.options=n,o.index=0,o.attributes=e,o.graphic=i,o.id=e.id,o.index=0,o.options=n,o}return __extends(e,t),e.prototype.getRandomNum=function(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)},e.prototype.updateGraphic=function(){var t=this.options.images[this.index],e=this.options.width||48,i=this.options.height||48,n=new esri.symbol.PictureMarkerSymbol(t,e,i);this.graphic.setSymbol(n),this.index=(this.index+1)%this.options.images.length,this.graphic.draw()},e}(e);t.StarAnimation=n;var o=function(){function t(t){this.options=t,this.isRunning=!1,this.animations=[],this.options=t}return t.prototype.getRandomNum=function(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)},t.prototype.getAnimationId=function(t){var e=this.animations.filter(function(e){return e.id===t});return e&&e.length>0?e[0]:null},t.prototype.start=function(){this.isRunning=!0;var t=this;this._timer=setInterval(function(){t.animations.forEach(function(e){t.getRandomNum(0,10)>5&&e.updateGraphic()})},this.options.timeout||20)},t.prototype.stop=function(){this.isRunning=!1,this._timer&&clearInterval(this._timer)},t.prototype.add=function(t){this.animations.push(t)},t.prototype.removeAnimationById=function(t){var e=this.getAnimationId(t);if(e){var i=this.animations.indexOf(e);i>=0&&this.animations.splice(i,1)}},t.prototype.clear=function(){this.stop(),this.animations=[]},t}();t.AnimationLayer=o}(flagwind||(flagwind={})),a7613=flagwind||(flagwind={}),a7614=function(){return function(t,e,i,n){this.type=t,this.listener=e,this.scope=i,this.once=n}}(),a7622=function(){function t(t){this._source=t||this,this._events=new a7613.Map}return t.prototype.addListener=function(t,e,i,n){if(void 0===i&&(i=this),void 0===n&&(n=!1),!t||!e)throw new a7613.ArgumentException;var o=this._events.get(t);o||(o=new Array,this._events.set(t,o));for(var r=0,a=o;r<a.length;r++){var s=a[r];if(s.listener===e&&s.scope===i)return}o.push(new a7614(t,e,i,n))},t.prototype.removeListener=function(t,e,i){if(void 0===i&&(i=this),!t||!e)throw new a7613.ArgumentException;var n=this._events.get(t);if(n){for(var o=0,r=n.length;o<r;o++){var a=n[o];if(a.listener===e&&a.scope===i){n.splice(o,1);break}}0===n.length&&this._events.delete(t)}},t.prototype.hasListener=function(t){var e=this._events.get(t);return!!e&&e.length>0},t.prototype.dispatchEvent=function(){var t,e=arguments;switch(e.length){case 1:e[0]instanceof a7613.EventArgs?t=e[0]:a7613.Type.isString(e[0])&&(t=new a7613.EventArgs(e[0]));break;case 2:t=new a7613.EventArgs(e[0],e[1])}t.source=this._source;var i=this._events.get(t.type);if(i&&0!==i.length){for(var n=new Array,o=0,r=i;o<r.length;o++){(a=r[o]).listener.call(a.scope,t),a.once&&n.push(a)}for(;n.length;){var a=n.pop();this.removeListener(a.type,a.listener,a.scope)}}},t}(),a7613.EventProvider=a7622,a7656=flagwind||(flagwind={}),a7657=function(t){function e(e,i){var n=t.call(this)||this;return n.id=e,n.title=i,n.isShow=!0,n.id=e,n.layer=n.onCreateGraphicsLayer({id:e}),n}return __extends(e,t),Object.defineProperty(e.prototype,"graphics",{get:function(){return this.layer.graphics},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.graphics.map(function(t){return t.attributes})},enumerable:!0,configurable:!0}),e.prototype.appendTo=function(t){this.layer.addToMap(t)},e.prototype.removeLayer=function(t){this.layer.removeFormMap(t)},Object.defineProperty(e.prototype,"count",{get:function(){return this.layer?this.graphics.length:0},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.layer.clear()},e.prototype.show=function(){this.isShow=!0,this.layer.show()},e.prototype.hide=function(){this.isShow=!1,this.layer.hide()},e.prototype.getGraphicById=function(t){for(var e=this.graphics,i=0;i<e.length;i++){if(e[i].attributes.id===t)return e[i]}return null},e.prototype.removeGraphicById=function(t){var e=this.getGraphicById(t);null!=e&&this.layer.remove(e)},e.prototype.on=function(t,e,i,n){void 0===i&&(i=this),void 0===n&&(n=!1),this.layer.addListener(t,e,i,n)},e.prototype.off=function(t,e,i){void 0===i&&(i=this),this.layer.removeListener(t,e,i)},e}(a7656.EventProvider),a7656.FlagwindFeatureLayer=a7657,function(t){t.BUSINESS_LAYER_OPTIONS={onLayerClick:function(t){console.log("onLayerClick")},onMapLoad:function(){},onEvent:function(t,e){console.log("onEvent")},onCheck:function(t){console.log("onCheck")},onEditInfo:function(t,e){console.log("onEditInfo")},onVisibleChanged:function(t){console.log("onVisibleChanged")},enableEdit:!0,enableSelectMode:!1,selectMode:1,showTooltipOnHover:!1,showInfoWindow:!1,dataType:"marker"};var e=function(e){function i(i,n,o){var r=e.call(this,n,o.title||"\u8bbe\u5907\u56fe\u5c42")||this;return r.flagwindMap=i,r.id=n,r.options=o,o=__assign({},t.BUSINESS_LAYER_OPTIONS,o),r.flagwindMap=i,r.options=o,r}return __extends(i,e),i.prototype.onInit=function(){if(this.onAddLayerBefor(),this.flagwindMap.addFeatureLayer(this),this.onAddLayerAfter(),this.flagwindMap.loaded)this.onLoad();else{var t=this;this.flagwindMap.on("onLoad",function(){t.onLoad()})}},i.prototype.onAddLayerBefor=function(){},i.prototype.onAddLayerAfter=function(){},Object.defineProperty(i.prototype,"map",{get:function(){return this.flagwindMap.map},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spatial",{get:function(){return this.flagwindMap.spatial},enumerable:!0,configurable:!0}),i.prototype.closeInfoWindow=function(){this.flagwindMap.closeInfoWindow()},i.prototype.gotoCenterById=function(t){var e=this.getGraphicById(t),i=this.getPoint(e.attributes);this.flagwindMap.centerAt(i.x,i.y)},i.prototype.saveGraphicList=function(t){for(var e=0;e<t.length;e++)this.saveGraphicByModel(t[e])},i.prototype.updateGraphicList=function(t){for(var e=0;e<t.length;e++)this.updateGraphicByModel(t[e])},i.prototype.setSelectStatusByModels=function(t,e){e&&this.clearSelectStatus();for(var i=0;i<t.length;i++){var n=this.onChangeStandardModel(t[i]),o=this.getGraphicById(n.id);o&&this.setSelectStatus(o.attributes,!0)}this.options.onCheck({target:t,check:!0,selectedItems:this.getSelectedGraphics().map(function(t){return t.attributes})})},i.prototype.saveGraphicByModel=function(t){if((t=this.onChangeStandardModel(t))&&t.id){var e=this.getGraphicById(t.id);return e?this.updateGraphicByModel(t,e):this.addGraphicByModel(t)}},i.prototype.addGraphicByModel=function(t){var e=this.creatGraphicByModel(t);this.layer.add(e)},i.prototype.creatGraphicByModel=function(t){return t=this.onChangeStandardModel(t),this.onValidModel(t)?(void 0===t.selected&&(t.selected=!1),this.onCreatGraphicByModel(t)):null},i.prototype.updateGraphicByModel=function(t,e){if(void 0===e&&(e=null),t=this.onChangeStandardModel(t),this.onValidModel(t)&&(e||(e=this.getGraphicById(t.id)),null!=e)){var i=this.getPoint(e.attributes);return this.onUpdateGraphicByModel(e.attributes),i}},i.prototype.clearSelectStatus=function(){for(var t=this.layer.graphics,e=0;e<t.length;e++)(t[e].attributes.selected||"boolean"!=typeof t[e].attributes.selected)&&this.setSelectStatus(t[e].attributes,!1);this.options.onCheck({target:t?t.map(function(t){return t.attributes}):[],check:!1,selectedItems:this.getSelectedGraphics().map(function(t){return t.attributes})})},i.prototype.getSelectedGraphics=function(){return this.layer.graphics.filter(function(t){return t.attributes&&t.attributes.selected})},i.prototype.getPoint=function(t){return this.flagwindMap.getPoint(t)},i.prototype.formPoint=function(t){return this.flagwindMap.onFormPoint(t)},i.prototype.onLoad=function(){this.layer._map||(this.layer._map=this.flagwindMap.innerMap),this.registerEvent(),this.onMapLoad()},i.prototype.onMapLoad=function(){this.options.onMapLoad()},i.prototype.registerEvent=function(){var t=this;this.on("onClick",function(e){t.onLayerClick(t,e.data)}),this.options.showTooltipOnHover&&(this.on("onMouseOver",function(e){"polyline"===e.data.graphic.options.dataType&&(e.data.graphic.attributes.offsetX=e.data.evt.offsetX,e.data.graphic.attributes.offsetY=e.data.evt.offsetY),t.flagwindMap.onShowTooltip(e.data.graphic),t.fireEvent("onMouseOver",e.data)}),this.on("onMouseOut",function(e){t.flagwindMap.onHideTooltip(e.data.graphic),t.fireEvent("onMouseOut",e.data)}))},i.prototype.onLayerClick=function(t,e){if(t.options.onLayerClick&&t.options.onLayerClick(e),t.options.showInfoWindow&&(e.graphic.attributes.eventName="",t.onShowInfoWindow(e)),t.options.enableSelectMode){if(1===t.options.selectMode){var i=e.graphic.attributes;e.graphic.attributes.selected?t.setSelectStatus(i,!1):t.setSelectStatus(i,!0)}else{t.clearSelectStatus();i=e.graphic.attributes;t.setSelectStatus(i,!0)}t.options.onCheck({target:[e.graphic.attributes],check:e.graphic.attributes.selected,selectedItems:t.getSelectedGraphics()})}},i.prototype.fireEvent=function(t,e){this.options.onEvent(t,e)},i.prototype.setSelectStatus=function(t,e){t.selected=e,this.onUpdateGraphicByModel(t)},i.prototype.onValidModel=function(t){return"marker"===this.options.dataType?t.longitude&&t.latitude:"polyline"===this.options.dataType?t.id&&t.polyline:void 0},i}(t.FlagwindFeatureLayer);t.FlagwindBusinessLayer=e}(flagwind||(flagwind={})),a7794=flagwind||(flagwind={}),a7795=function(){function t(t,e){this.options={id:"draw-layer",autoCenter:!0,routeUrl:"http://27.17.34.22:6080/arcgis/rest/services/Features/NAServer/Route",onEvent:function(t,e){}},this.routes=[],this.flagwindMap=t,this.options=__assign({},this.options,e),this.createDrawLayer(),this.createDrawSymbol()}return t.prototype.draw=function(){this.createDrawRoute(),this.addStop()},t.prototype.clear=function(){this.clearBarriers(),this.clearRoutes(),this.clearStops(),this.addStop()},t.prototype.finish=function(){var t=this;return new Promise(function(e,i){var n;t.routes.length>0&&(n=t.routes[0].geometry),t.clearDrawLayer(),t.addDrawGraphic(n),e(JSON.stringify(n.paths[0])),t.options.onEvent("finish",n),t.clear(),t.removeEventHandlers()})},t.prototype.clearDrawLayer=function(){this.drawLayer.clear()},t.prototype.addStop=function(){var t=this;this.removeEventHandlers(),this.MAPONCLICH_ADDSTOPS=this.flagwindMap.map.on("click",function(e){var i=new esri.Graphic(e.mapPoint,t.stopSymbol,{RouteName:"draw-route-line"});t.stopsLayer.add(i),t.routeParams.stops.features.push(i),t.options.autoCenter&&t.flagwindMap.map.centerAt(e.mapPoint).then(function(){}),t.routeParams.stops.features.length>1&&t.routeTask.solve(t.routeParams)})},t.prototype.createDrawLayer=function(){this.drawLayer=new esri.layers.GraphicsLayer({id:this.options.id}),this.lineLayer=new esri.layers.GraphicsLayer({id:"draw-lineLayer"}),this.stopsLayer=new esri.layers.GraphicsLayer({id:"draw-stopsLayer"}),this.barriersLayer=new esri.layers.GraphicsLayer({id:"draw-barriersLayer"}),this.flagwindMap.map.addLayer(this.drawLayer),this.flagwindMap.map.addLayer(this.lineLayer),this.flagwindMap.map.addLayer(this.stopsLayer),this.flagwindMap.map.addLayer(this.barriersLayer)},t.prototype.createDrawSymbol=function(){this.routeSymbol=(new esri.symbol.SimpleLineSymbol).setColor(new esri.Color([0,0,255,.5])).setWidth(5),this.stopSymbol=(new esri.symbol.SimpleMarkerSymbol).setStyle(esri.symbol.SimpleMarkerSymbol.STYLE_CROSS).setSize(15),this.stopSymbol.outline.setWidth(3),this.barrierSymbol=(new esri.symbol.SimpleMarkerSymbol).setStyle(esri.symbol.SimpleMarkerSymbol.STYLE_X).setSize(10),this.barrierSymbol.outline.setWidth(3).setColor(new esri.Color([255,0,0]))},t.prototype.createDrawRoute=function(){this.routeTask=new esri.tasks.RouteTask(this.options.routeUrl),this.routeParams=new esri.tasks.RouteParameters,this.routeParams.stops=new esri.tasks.FeatureSet,this.routeParams.barriers=new esri.tasks.FeatureSet,this.routeParams.outSpatialReference=this.flagwindMap.spatial;var t=this;this.routeTask.on("solve-complete",function(e){t.showRoute(e)}),this.routeTask.on("error",function(e){t.errorHandler(e)})},t.prototype.addDrawGraphic=function(t){var e=new esri.symbol.CartographicLineSymbol(esri.symbol.CartographicLineSymbol.STYLE_SOLID,new esri.Color([38,101,196]),2,esri.symbol.CartographicLineSymbol.CAP_ROUND,esri.symbol.CartographicLineSymbol.JOIN_MITER,2),i=new esri.Graphic(t,e);this.drawLayer.add(i)},t.prototype.clearBarriers=function(){for(var t=this.routeParams.barriers.features.length-1;t>=0;t--){var e=this.routeParams.barriers.features.splice(t,1)[0];this.barriersLayer.remove(e)}},t.prototype.clearStops=function(){for(var t=this.routeParams.stops.features.length-1;t>=0;t--){var e=this.routeParams.stops.features.splice(t,1)[0];this.stopsLayer.remove(e)}},t.prototype.clearRoutes=function(){for(var t=this.routes.length-1;t>=0;t--){var e=this.routes.splice(t,1)[0];this.lineLayer.remove(e)}this.routes=[]},t.prototype.showRoute=function(t){for(var e=0;e<t.result.routeResults.length;e++){var i=t.result.routeResults[e];i.route.setSymbol(this.routeSymbol),this.lineLayer.add(i.route),this.routes.push(i.route)}},t.prototype.errorHandler=function(t){console.warn("\u8def\u5f84\u89e3\u6790\u51fa\u9519\uff1a\n "+t.message+"\n"+t.details)},t.prototype.removeEventHandlers=function(){this.MAPONCLICH_ADDSTOPS&&this.MAPONCLICH_ADDSTOPS.remove(),this.MAPONCLICH_ADDBARRIERS&&this.MAPONCLICH_ADDBARRIERS.remove()},t}(),a7794.EsriDrawLayer=a7795,a7848=flagwind||(flagwind={}),a7849=function(t){function e(e,i){var n=this;if(i=__assign({},a7848.EDIT_LAYER_OPTIONS,i),(n=t.call(this,"edit_"+e.id,"\u7f16\u8f91\u56fe\u5c42")||this).businessLayer=e,n.flagwindMap=e.flagwindMap,n.options=i,n.editObj=new esri.toolbars.Edit(n.flagwindMap.innerMap),n.flagwindMap.addFeatureLayer(n),n.flagwindMap.innerMap.loaded)n.onLoad();else{var o=n;n.flagwindMap.innerMap.on("load",function(){o.onLoad()})}return n}return __extends(e,t),e.prototype.activateEdit=function(t){var e=this.businessLayer.getGraphicById(t);if(e){this.businessLayer.hide(),this.show();var i=this.businessLayer.creatGraphicByModel(e.attributes);this.layer.add(i),i.attributes.eventName="start";var n=esri.toolbars.Edit.MOVE;this.editObj.activate(n,i,null),this.businessLayer.onShowInfoWindow({graphic:e})}else console.log("\u65e0\u6548\u7684\u4ee3\u7801\uff1a"+t)},e.prototype.cancelEdit=function(t){this.editObj.deactivate(),this.clear(),this.hide(),this.flagwindMap.innerMap.infoWindow.hide(),this.businessLayer.show();var e=this.businessLayer.getGraphicById(t);e.attributes.eventName="delete",this.businessLayer.onShowInfoWindow({graphic:e})},e.prototype.registerModifyEvent=function(t){var e=this;dojo.connect(dojo.byId(t),"onclick",function(t){var i=t.target.attributes.key.value;e.activateEdit(i)})},e.prototype.registerDeleteEvent=function(t){var e=this;dojo.connect(dojo.byId(t),"onclick",function(t){var i=t.target.attributes.key.value;e.cancelEdit(i)})},e.prototype.onLoad=function(){this.layer._map||(this.layer._map=this.flagwindMap.innerMap);try{this.registerEvent()}catch(t){console.error(t)}},Object.defineProperty(e.prototype,"map",{get:function(){return this.flagwindMap.map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spatial",{get:function(){return this.flagwindMap.spatial},enumerable:!0,configurable:!0}),e.prototype.onCreateGraphicsLayer=function(t){var e=new esri.layers.GraphicsLayer(t);return e.addToMap=function(t){t.addLayer(this)},e.removeFormMap=function(t){t.removeLayer(this)},e},e.prototype.onChanged=function(t,e){return this.options.onEditInfo(t,e)},e.prototype.registerEvent=function(){var t=this;dojo.connect(this.layer,"onClick",function(e){t.onLayerClick(t,e)});var e={};console.log("\u7f16\u8f91\u5bf9\u8c61\uff1a"+this.editObj),dojo.on(this.editObj,"graphic-first-move",function(i){console.log("\u8981\u7d20\u79fb\u52a8---------graphic-first-move"),t.flagwindMap.innerMap.infoWindow.hide(),e=i.graphic.attributes}),dojo.on(this.editObj,"graphic-move-stop",function(i){console.log("\u8981\u7d20\u79fb\u52a8---------graphic-move-stop"),t.editObj.deactivate();var n=i.graphic.attributes.id;window.$Modal.confirm({title:"\u786e\u5b9a\u8981\u8fdb\u884c\u66f4\u6539\u5417\uff1f",content:"\u521d\u59cb\u5750\u6807\u503c\uff08\u7ecf\u5ea6\uff09:"+e.longitude+",\uff08\u7eac\u5ea6\uff09:"+e.latitude+"\r\u5f53\u524d\u5750\u6807\u503c\uff08\u7ecf\u5ea6\uff09:"+i.graphic.geometry.x.toFixed(8)+",\uff08\u7eac\u5ea6\uff09:"+i.graphic.geometry.y.toFixed(8),onOk:function(){var e=i.graphic.geometry,o=t.businessLayer.formPoint(e),r=__assign({},i.graphic.attributes,o);t.onChanged({id:n,latitude:r.latitude,longitude:r.longitude},!0).then(function(e){e&&(t.businessLayer.removeGraphicById(r.id),t.businessLayer.addGraphicByModel(r))})},onCancel:function(){t.onChanged({id:n,latitude:e.latitude,longitude:e.longitude},!1)}}),i.graphic.attributes.eventName="stop",t.clear(),t.hide(),t.flagwindMap.innerMap.infoWindow.hide(),t.businessLayer.show()})},e.prototype.onLayerClick=function(t,e){t.businessLayer.options.onLayerClick&&t.businessLayer.options.onLayerClick(e),t.businessLayer.options.showInfoWindow&&t.businessLayer.onShowInfoWindow(e)},e}(a7848.FlagwindFeatureLayer),a7848.EsriEditLayer=a7849,a7914=flagwind||(flagwind={}),a7915=function(t){function e(e){var i=t.call(this)||this;return i.options=e,i.isShow=!0,i.layer=i.onCreateGraphicsLayer(e),i}return __extends(e,t),Object.defineProperty(e.prototype,"graphics",{get:function(){return this.layer.graphics},enumerable:!0,configurable:!0}),e.prototype.appendTo=function(t){this.layer.addToMap(t)},e.prototype.removeLayer=function(t){this.layer.removeFormMap(t)},e.prototype.clear=function(){this.layer.clear()},e.prototype.show=function(){this.isShow=!0,this.layer.show()},e.prototype.hide=function(){this.isShow=!1,this.layer.hide()},e.prototype.setGeometry=function(t,e){this.getGraphicByName(t).forEach(function(t){t.setGeometry(e)})},e.prototype.setSymbol=function(t,e){this.getGraphicByName(t).forEach(function(t){t.setSymbol(e)})},e.prototype.showGraphic=function(t){this.getGraphicByName(t).forEach(function(t){t.show()})},e.prototype.hideGraphic=function(t){this.getGraphicByName(t).forEach(function(t){t.hide()})},e.prototype.addGraphic=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];void 0!==i&&i.forEach(function(i,n){if(i){var o=i.attributes;o.__master=0===n,o.__name=t,e.layer.add(i)}})},e.prototype.getMasterGraphicByName=function(t){return this.graphics.forEach(function(e){var i=e.attributes;if(t===i.__name&&i.__master)return e}),null},e.prototype.getGraphicByName=function(t){for(var e=[],i=0;i<this.graphics.length;i++){this.graphics[i].attributes.__name===t&&e.push(this.graphics[i])}return e},e.prototype.removeGraphicByName=function(t){var e=this,i=this.getGraphicByName(t);null!=i&&i.forEach(function(t){e.layer.remove(t)})},e.prototype.on=function(t,e,i,n){void 0===i&&(i=this),void 0===n&&(n=!1),this.addListener(t,e,i,n)},e.prototype.off=function(t,e,i){void 0===i&&(i=this),this.removeListener(t,e,i)},e}(a7914.EventProvider),a7914.FlagwindGroupLayer=a7915,a7983=flagwind||(flagwind={}),a7984=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onCreateGraphicsLayer=function(t){var e=new esri.layers.GraphicsLayer(t);return e.addToMap=function(t){t.addLayer(this)},e.removeFormMap=function(t){t.removeLayer(this)},e},e}(a7983.FlagwindGroupLayer),a7983.EsriGroupLayer=a7984,a7997=flagwind||(flagwind={}),a7998=function(){function t(t,e){this.flagwindMap=t,this.options=__assign({id:"heatLayer",config:{}},e),this.map=t,this.heatLayer=this.createHeatLayer(),this.map.innerMap.addLayer(this.heatLayer)}return t.prototype.createHeatLayer=function(){var t=document.createElement("div");return t.setAttribute("id",this.options.id),this.map.innerMap.container.appendChild(t),this.heatContainer=t,new HeatmapLayer({config:__assign({},__assign({useLocalMaximum:!1,radius:40,gradient:{.45:"rgb(000,000,255)",.55:"rgb(000,255,255)",.65:"rgb(000,255,000)",.95:"rgb(255,255,000)",1:"rgb(255,000,000)"}},this.options.config)),map:this.map.innerMap,domNodeId:this.options.id,opacity:.85})},t.prototype.resize=function(){this.heatLayer.resizeHeatmap()},t.prototype.clear=function(){this.heatLayer.clearData()},t.prototype.show=function(){this.heatContainer.style.display="block"},t.prototype.hide=function(){this.heatContainer.style.display="none"},t.prototype.showDataList=function(t,e){var i=this,n=this.changeStandardData(t);if(0!==n.length){var o=new esri.geometry.Multipoint(this.map.spatial),r=n.map(function(t){var e=new esri.geometry.Point(t.x,t.y,i.map.spatial);return o.addPoint(e),{attributes:{count:t.count||1},geometry:{spatialReference:{wkid:4326},type:"point",x:t.x,y:t.y}}});e&&this.map.innerMap.setExtent(o.getExtent(),!1),this.heatLayer.setData(r)}else console.log("\u672a\u4f20\u5165\u70ed\u70b9\u6570\u636e")},t.prototype.changeStandardData=function(t){var e=[];return t.forEach(function(t){(t.x||t.longitude)&&(t.y||t.latitude)&&t.count&&e.push({x:t.x||t.longitude,y:t.y||t.latitude,count:t.count})}),e},t}(),a7997.EsriHeatmapLayer=a7998,function(t){t.MAP_OPTIONS={onMapLoad:function(){console.log("onMapLoad")},onMapZoomEnd:function(t){console.log("onMapZoomEnd")},onMapClick:function(t){console.log("onMapClick")},onCreateContextMenu:function(t){console.log("onCreateContextMenu")}};var e=function(e){function i(i,n,o){var r=e.call(this)||this;return r.mapSetting=i,r.mapEl=n,r.featureLayers=[],r.baseLayers=[],r.loaded=!1,r.options=__assign({},t.MAP_OPTIONS,o),r}return __extends(i,e),i.prototype.onInit=function(){this.onCreateMap(),this.onCreateBaseLayers();var t=this;t.on("onLoad",function(){try{t.loaded=!0,t.goToCenter(),t.onMapLoad()}catch(t){console.error(t)}}),t.on("onZoomEnd",function(e){t.onMapZoomEnd(e.data)})},i.prototype.onFormPoint=function(e){var i={lat:e.y,lon:e.x};return e.latitude&&e.longitude&&(i.lon=e.longitude,i.lat=e.latitude),3589===this.mapSetting.wkid&&(console.log("GCJ-02\u5750\u6807\uff1a"+i.lon+","+i.lat),i=t.MapUtils.gcj_decrypt_exact(i.lat,i.lon)),this.spatial.wkid!==this.mapSetting.wkidFromApp&&(3857===this.spatial.wkid&&4326===this.mapSetting.wkidFromApp?this.mapSetting.is25D?(console.log("2.5D\u5750\u6807\uff1a"+i.lon+","+i.lat),i=t.MapUtils.point25To2(i.lon,i.lat),console.log("\u9ad8\u5fb7\u5750\u6807\uff1a"+i.lon+","+i.lat),i=t.MapUtils.gcj_decrypt(i.lat,i.lon),console.log("\u539f\u59cb\u5750\u6807\uff1a"+i.lon+","+i.lat)):i=t.MapUtils.mercator2lonlat(i.lat,i.lon):102100===this.spatial.wkid&&4326===this.mapSetting.wkidFromApp?i=t.MapUtils.mercator_decrypt(i.lat,i.lon):4326===this.spatial.wkid&&3857===this.mapSetting.wkidFromApp&&(i=t.MapUtils.mercator_decrypt(i.lat,i.lon))),{longitude:parseFloat(i.lon.toFixed(8)),latitude:parseFloat(i.lat.toFixed(8))}},i.prototype.onToPoint=function(e){var i={lat:e.latitude||e.lat,lon:e.longitude||e.lon};return t.MapUtils.validGeometryModel(e)||(i.lon=e.x||i.lon,i.lat=e.y||i.lat),3589===this.mapSetting.wkid&&(console.log("GCJ-02\u5750\u6807\uff1a"+i.lon+","+i.lat),i=t.MapUtils.gcj_decrypt_exact(i.lat,i.lon)),this.spatial.wkid!==this.mapSetting.wkidFromApp&&(3857===this.spatial.wkid&&4326===this.mapSetting.wkidFromApp?this.mapSetting.is25D?(console.log("\u539f\u59cb\u5750\u6807\uff1a"+i.lon+","+i.lat),i=t.MapUtils.gcj_encrypt(i.lat,i.lon),console.log("\u9ad8\u5fb7\u5750\u6807\uff1a"+i.lon+","+i.lat),i=t.MapUtils.point2To25(i.lon,i.lat),console.log("2.5D\u5750\u6807\uff1a"+i.lon+","+i.lat)):i=t.MapUtils.lonlat2mercator(i.lat,i.lon):102100===this.spatial.wkid&&4326===this.mapSetting.wkidFromApp?i=t.MapUtils.mercator_encrypt(i.lat,i.lon):4326===this.spatial.wkid&&3857===this.mapSetting.wkidFromApp&&(i=t.MapUtils.mercator_encrypt(i.lat,i.lon))),this.onCreatePoint({x:i.lon,y:i.lat,spatial:this.spatial})},i.prototype.on=function(t,e,i,n){void 0===i&&(i=this),void 0===n&&(n=!1),this.addListener(t,e,i,n)},i.prototype.off=function(t,e,i){void 0===i&&(i=this),this.removeListener(t,e,i)},i.prototype.closeInfoWindow=function(){this.onCloseInfoWindow()},i.prototype.goToCenter=function(){if(this.mapSetting.center&&2===this.mapSetting.center.length){var t=this.getPoint({x:this.mapSetting.center[0],y:this.mapSetting.center[1]});this.onCenterAt(t)}},i.prototype.getBaseLayerById=function(t){var e=this.baseLayers.filter(function(e){return e.id===t});return e&&e.length>0?e[0]:null},i.prototype.centerAt=function(t,e){var i=this.onCreatePoint({x:t,y:e,spatial:this.spatial});this.onCenterAt(i)},i.prototype.getPoint=function(t){return this.onToPoint(t)},i.prototype.addFeatureLayer=function(t){if(this.getFeatureLayerById(t.id))throw Error("\u56fe\u5c42"+t.id+"\u5df2\u5b58\u5728");this.featureLayers.push(t),t.appendTo(this.innerMap)},i.prototype.onMapLoad=function(){this.options.onMapLoad&&this.options.onMapLoad();var t=this;this.on("onClick",function(e){t.options.onMapClick(e)})},i.prototype.showBaseLayer=function(t){var e=this.getBaseLayerById(t);return!!e&&(e.show(),!0)},i.prototype.getFeatureLayerById=function(t){var e=this.featureLayers.filter(function(e){return e.id===t});return null!=e&&e.length>0?e[0]:null},i.prototype.showFeatureLayer=function(t){var e=this.getFeatureLayerById(t);return!!e&&(e.show(),!0)},i.prototype.removeFeatureLayer=function(t){var e=this.getFeatureLayerById(t);if(e){e.removeLayer(this.innerMap);var i=this.featureLayers.indexOf(e);return this.featureLayers.splice(i,1),!0}return!1},Object.defineProperty(i.prototype,"map",{get:function(){return this.innerMap},enumerable:!0,configurable:!0}),i.prototype.onMapZoomEnd=function(t){this.options.onMapZoomEnd(t.level)},i}(t.EventProvider);t.FlagwindMap=e}(flagwind||(flagwind={})),a8103=flagwind||(flagwind={}),a8104=function(t){function e(e,i,n){var o=t.call(this,e,i,n)||this;return o.mapSetting=e,o.mapEl=i,o.onInit(),o}return __extends(e,t),e.prototype.onAddEventListener=function(t,e){dojo.on(this.map,t,e)},e.prototype.onCenterAt=function(t){this.map.centerAt(t).then(function(){console.log("centerAt:"+t.x+","+t.y)})},e.prototype.onCreatePoint=function(t){return new esri.geometry.Point(t.x,t.y,t.spatial||this.spatial)},e.prototype.onCreateMap=function(){this.spatial=new esri.SpatialReference({wkid:this.mapSetting.wkid||4326});var t=this.mapSetting,e={wkid:t.wkid,center:t.center,logo:t.logo,slider:t.slider,sliderPosition:t.sliderPosition,zoom:t.zoom,minZoom:t.minZoom,maxZoom:t.maxZoom};if(t.basemap&&(e.basemap=t.basemap),t.extent&&4===t.extent.length){var i=this.getPoint({x:t.extent[0],y:t.extent[1]}),n=this.getPoint({x:t.extent[2],y:t.extent[3]}),o=new esri.geometry.Extent(i.x,i.y,n.x,n.y,this.spatial);e.extent=o}t.webTiledUrl&&(e.lods=this.getTileInfo().lods);var r=new esri.Map(this.mapEl,e);r.infoWindow.anchor="top",this.innerMap=r;var a=this.tooltipElement=document.createElement("div");a.classList.add("flagwind-map-tooltip"),this.innerMap.root.appendChild(a);var s=this;r.on("load",function(t){s.dispatchEvent("onLoad",t)}),r.on("click",function(t){s.dispatchEvent("onClick",t)}),r.on("dbl-click",function(t){s.dispatchEvent("onDbClick",t)}),r.on("mouse-out",function(t){s.dispatchEvent("onMouseOut",t)}),r.on("mouse-over",function(t){s.dispatchEvent("onMouseOver",t)}),r.on("mouse-move",function(t){s.dispatchEvent("onMouseMove",t)}),r.on("mouse-wheel",function(t){s.dispatchEvent("onMouseWheel",t)}),r.on("zoom",function(t){s.dispatchEvent("onZoom",t)}),r.on("zoom-start",function(t){s.dispatchEvent("onZoomStart",t)}),r.on("zoom-end",function(t){s.dispatchEvent("onZoomEnd",t)}),r.on("pan",function(t){s.dispatchEvent("onPan",t)}),r.on("pan-start",function(t){s.dispatchEvent("onPanStart",t)}),r.on("pan-end",function(t){s.dispatchEvent("onPanEnd",t)}),r.on("update-start",function(t){s.dispatchEvent("onUpdateStart",t)}),r.on("update-end",function(t){s.dispatchEvent("onUpdateEnd",t)}),r.on("extent-change",function(t){s.dispatchEvent("onExtentChange",t)}),r.on("resize",function(t){s.dispatchEvent("onResize",t)})},e.prototype.onShowInfoWindow=function(t){if(this.innerMap.infoWindow&&this.innerMap.infoWindow.hide(),t.context){var e=this.getPoint(t.graphic.attributes);if(this.innerMap.infoWindow.setTitle(t.context.title),this.innerMap.infoWindow.setContent(t.context.content),t.options.width&&t.options.height&&this.innerMap.infoWindow.resize(t.options.width,t.options.height),t.options.offset){var i=this.innerMap.toScreen(e);i.x+=t.options.offset.x,i.y+=t.options.offset.y,this.innerMap.infoWindow.show(i)}else this.innerMap.infoWindow.show(e)}},e.prototype.onCloseInfoWindow=function(){this.innerMap.infoWindow&&this.innerMap.infoWindow.hide()},e.prototype.onCreateBaseLayers=function(){var t=this,e=new Array;if(this.mapSetting.imageUrl){var i=new a8103.EsriTiledLayer("base_arcgis_image",this.mapSetting.imageUrl,this.spatial,"\u5f71\u50cf\u56fe\u5c42");e.push(i)}if(this.mapSetting.baseUrl){i=new a8103.EsriTiledLayer("base_arcgis_tiled",this.mapSetting.baseUrl,this.spatial,"\u74e6\u7247\u56fe\u5c42");e.push(i)}if(this.mapSetting.zhujiImageUrl){i=new a8103.EsriTiledLayer("base_arcgis_zhuji",this.mapSetting.zhujiImageUrl,this.spatial,"\u74e6\u7247\u56fe\u5c42");e.push(i)}if(this.mapSetting.webTiledUrl){var n=this.getTileInfo(),o=new esri.layers.WebTiledLayer(this.mapSetting.webTiledUrl,{tileInfo:n});(i=new a8103.EsriTiledLayer("base_arcgis_tiled",null,this.spatial,"\u74e6\u7247\u56fe\u5c42")).layer=o,e.push(i)}return this.baseLayers=e,this.baseLayers.forEach(function(e){e.appendTo(t.innerMap),"base_arcgis_tiled"!==e.id&&e.hide()}),e},e.prototype.onShowTooltip=function(t){var e=t.attributes,i=new esri.geometry.Point(e.longitude,e.latitude,this.spatial),n=this.innerMap.toScreen(i),o=e.name;"polyline"===t.options.dataType&&(n={x:e.offsetX,y:e.offsetY}),this.tooltipElement.innerHTML="<div>"+o+"</div>",this.tooltipElement.style.left=n.x+15+"px",this.tooltipElement.style.top=n.y+15+"px",this.tooltipElement.style.display="block"},e.prototype.onHideTooltip=function(t){this.tooltipElement.style.display="none"},e.prototype.onCreateContextMenu=function(t){for(var e=t.contextMenu,i=this.ctxMenuForMap=new dijit.Menu({onOpen:function(t){this.currentLocation=this.getMapPointFromMenuPosition(t,this.innerMap)}}),n=0;n<e.length;n++)i.addChild(new dijit.MenuItem({label:e[n],onClick:function(e){t.contextMenuClickEvent(this.label)}}));i.startup(),i.bindDomNode(this.innerMap.container)},e.prototype.getTileInfo=function(){if(this.tileInfo)return this.tileInfo;var t=new esri.layers.TileInfo({dpi:96,spatialReference:this.spatial,rows:256,cols:256,origin:{x:-20037508.342787,y:20037508.342787,spatialReference:this.spatial},lods:[{level:"0",scale:591657527.591555,resolution:156543.03392800014},{level:"1",scale:295828763.795777,resolution:78271.51696399994},{level:"2",scale:147914381.897889,resolution:39135.75848200009},{level:"3",scale:73957190.948944,resolution:19567.87924099992},{level:"4",scale:36978595.474472,resolution:9783.93962049996},{level:"5",scale:18489297.737236,resolution:4891.96981024998},{level:"6",scale:9244648.868618,resolution:2445.98490512499},{level:"7",scale:4622324.434309,resolution:1222.992452562495},{level:"8",scale:2311162.217155,resolution:611.4962262813797},{level:"9",scale:305.74811314055756,resolution:1155581.108577},{level:"10",scale:577790.554289,resolution:152.87405657041106},{level:"11",scale:288895.277144,resolution:76.43702828507324},{level:"12",scale:144447.638572,resolution:38.21851414253662},{level:"13",scale:72223.819286,resolution:19.10925707126831},{level:"14",scale:36111.909643,resolution:9.554628535634155},{level:"15",scale:18055.954822,resolution:4.77731426794937},{level:"16",scale:9027.977411,resolution:2.388657133974685},{level:"17",scale:4513.988705,resolution:1.1943285668550503},{level:"18",scale:2256.994353,resolution:.5971642835598172},{level:"19",scale:1128.497176,resolution:.29858214164761665}]});return this.tileInfo=t,t},e}(a8103.FlagwindMap),a8103.EsriMap=a8104,a8197=flagwind||(flagwind={}),a8198=function(t){function e(e){var i=t.call(this)||this;return i._kind="marker",i._isInsided=!1,i.isShow=!0,i.options=e,i.id=e.id,i.spatial=e.spatial,i.attributes=e.attributes?e.attributes:{},"marker"===i.options.dataType?(i.symbol=e.symbol?e.symbol:{},i.icon=e.icon,!i.icon&&i.symbol.imageUrl&&(i.icon=new esri.symbol.PictureMarkerSymbol(i.symbol.imageUrl,i.symbol.width,i.symbol.height)),i.marker=new esri.Graphic(e.point,i.icon,e),e.point&&(i.geometry=new a8197.EsriPoint(e.point.x,e.point.y,i.spatial).point),e.geometry&&(i.geometry=e.geometry)):"polyline"===i.options.dataType&&(i.polyline=i.toPolyline(i.attributes.polyline,i.spatial),i.lineSymbol=i.getLineSymbol(i.attributes,4,[255,0,0]),i.marker=new esri.Graphic(i.polyline,i.lineSymbol,i.attributes)),i}return __extends(e,t),e.prototype.addClass=function(t){if(this.symbol.className=t," "!==t&&null!==t&&void 0!==t&&this.element)for(var e=t.split(" "),i=0;i<e.length;i++)this.element.classList.add(e[i])},e.prototype.removeClass=function(t){if(" "!==t&&null!==t&&void 0!==t&&this.element)for(var e=t.split(" "),i=0;i<e.length;i++)this.element.classList.remove(e[i])},e.prototype.getPointFromPloyline=function(){var t={};return t.x=(this.marker._extent.xmax+this.marker._extent.xmin)/2,t.y=(this.marker._extent.ymax+this.marker._extent.ymin)/2,t},e.prototype.toPolyline=function(t,e){if(!t)return null;t=JSON.parse(t);for(var i=new esri.geometry.Polyline(e),n=1;n<t.length;n++)if(t[n]&&!(t[n].length<2)){var o=[t[n-1][0],t[n-1][1]],r=[t[n][0],t[n][1]];i.addPath([o,r])}return i},e.prototype.getLineSymbol=function(t,e,i){return i=i||[38,101,196],e=e||4,new esri.symbol.CartographicLineSymbol(esri.symbol.CartographicLineSymbol.STYLE_DASH,new esri.Color(i),e,esri.symbol.CartographicLineSymbol.CAP_ROUND,esri.symbol.CartographicLineSymbol.JOIN_MITER,2)},e.prototype.clone=function(t){return new e({id:t,symbol:this.symbol,attributes:this.attributes,point:this.geometry})},Object.defineProperty(e.prototype,"kind",{get:function(){return this._kind},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInsided",{get:function(){return this._isInsided},enumerable:!0,configurable:!0}),e.prototype.on=function(t,e,i,n){void 0===i&&(i=this),void 0===n&&(n=!1),this.addListener(t,e,i,n)},e.prototype.off=function(t,e,i){void 0===i&&(i=this),this.removeListener(t,e,i)},e.prototype.show=function(){if(!this.layer)throw new a8197.Exception("\u8be5\u8981\u7d20\u6ca1\u6709\u6dfb\u52a0\u5230\u56fe\u5c42\u4e0a\uff0c\u82e5\u60f3\u663e\u793a\u8be5\u8981\u7d20\u8bf7\u8c03\u7528addToMap\u65b9\u6cd5");this.addTo(this.layer.layer),this.isShow=!0},e.prototype.hide=function(){this.marker.hide(),this.isShow=!1},e.prototype.remove=function(){this._isInsided&&this.layer&&(this.layer.layer.remove(this.marker),this._isInsided=!1)},e.prototype.delete=function(){this._isInsided&&this.layer&&(this.layer.layer.remove(this.marker),this._isInsided=!1)},e.prototype.setAngle=function(t){this.icon.setAngle(t)},e.prototype.setSymbol=function(t){"marker"===this.options.dataType&&this.symbol?(t.className&&(this.symbol.className&&this.removeClass(this.symbol.className),this.addClass(t.className)),t.icon&&this.marker.setSymbol(t.icon),t.imageUrl&&this.icon.setUrl(t.imageUrl)):"polyline"===this.options.dataType&&this.lineSymbol&&(t.width&&this.lineSymbol.setWidth(t.width),t.color&&this.lineSymbol.setColor(t.color),t.miterLimit&&this.lineSymbol.setMiterLimit(t.miterLimit)),this.symbol=__assign({},this.symbol,t)},e.prototype.draw=function(){this.marker.draw()},Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry=t,this.marker.setGeometry(t)},enumerable:!0,configurable:!0}),e.prototype.setGeometry=function(t){if(!(t instanceof a8197.EsriPoint))throw new Error("\u4e0d\u5339\u914d\u7c7b\u578b");this.geometry=new a8197.EsriPoint(t.x,t.y,this.spatial).point},e.prototype.addTo=function(t){var e=this;this._isInsided=!0,t.on("graphic-node-add",function(){if(e.marker.getNode()){"polyline"===e.options.dataType&&(e.attributes.longitude=e.getPointFromPloyline().x,e.attributes.latitude=e.getPointFromPloyline().y),e.element=e.marker.getNode(),e.symbol&&e.options.symbol&&e.options.symbol.className&&(e.addClass(e.options.symbol.className),e.symbol.className="");["onmouseover","onmouseout","onmouseup","onmousedown","ondblclick","onclick"].forEach(function(t){e.registerEvent(e.element,t)})}else console.log("\u65e0\u6cd5\u83b7\u53d6\u6807\u6ce8\u5143\u7d20")}),t.add(this.marker)},e.prototype.registerEvent=function(t,e){var i=this;t[e]=function(t){switch(e){case"onmouseover":e="onMouseOver";break;case"onmouseout":e="onMouseOut";break;case"onmouseup":e="onMouseUp";break;case"onmousedown":e="onMouseDown";break;case"ondblclick":e="onDblClick";break;case"onclick":e="onClick"}i.fireEvent(e,{graphic:i,mapPoint:i.geometry,evt:t})}},e.prototype.fireEvent=function(t,e){this.dispatchEvent(t,e),this.layer&&this.layer.dispatchEvent(t,e)},e}(a8197.EventProvider),a8197.EsriMarkerGraphic=a8198,a8272=flagwind||(flagwind={}),a8273=function(t){function e(e,i,n,o){var r=t.call(this,i,n,o)||this;return r.businessService=e,r.isLoading=!1,r.onInit(),r}return __extends(e,t),e.prototype.onCreateGraphicsLayer=function(t){return new a8272.EsriGraphicsLayer(t)},e.prototype.openInfoWindow=function(t,e,i){var n=this.getGraphicById(t);e?this.flagwindMap.onShowInfoWindow({graphic:n,context:e,options:i||{}}):this.onShowInfoWindow({graphic:n})},e.prototype.onShowInfoWindow=function(t){var e=this.businessService.getInfoWindowContext(t.graphic.attributes);this.flagwindMap.onShowInfoWindow({graphic:t.graphic,context:{type:"html",title:e.title,content:e.content},options:{}})},e.prototype.onChangeStandardModel=function(t){return this.businessService.changeStandardModel(t)},e.prototype.getImageUrl=function(t){switch(t.status){case 0:return t.selected?this.options.symbol.imageUrl.checkedOff:this.options.symbol.imageUrl.offline;case 1:default:return t.selected?this.options.symbol.imageUrl.checkedOn:this.options.symbol.imageUrl.online}},e.prototype.getClassName=function(t){return null==t.selected?"":t.selected?"checked":"unchecked"},e.prototype.onCreatGraphicByModel=function(t){var e=this.options.symbol.className||"graphic-tollgate",i=this.getImageUrl(t);return new a8272.EsriMarkerGraphic({id:t.id,dataType:this.options.dataType,symbol:{className:e,imageUrl:i,width:this.options.symbol.width||20,height:this.options.symbol.height||27},point:this.getPoint(t),spatial:this.flagwindMap.spatial,attributes:t})},e.prototype.onUpdateGraphicByModel=function(t){var e=this.getGraphicById(t.id);e&&(e.geometry=new a8272.EsriPoint(t.longitude,t.latitude,this.flagwindMap.spatial).point,e.attributes=t,this.setGraphicStatus(t))},e.prototype.showDataList=function(){var t=this;return t.isLoading=!0,t.fireEvent("showDataList",{action:"start"}),this.businessService.getDataList().then(function(e){t.isLoading=!1,t.saveGraphicList(e),t.fireEvent("showDataList",{action:"end",attributes:e})}).catch(function(e){t.isLoading=!1,console.log("\u52a0\u8f7d\u5361\u53e3\u6570\u636e\u65f6\u53d1\u751f\u4e86\u9519\u8bef\uff1a",e),t.fireEvent("showDataList",{action:"error",attributes:e})})},e.prototype.start=function(){var t=this;this.timer=setInterval(function(){t.updateStatus()},this.options.timeout||2e4)},e.prototype.stop=function(){this.timer&&clearInterval(this.timer)},e.prototype.setSelectStatus=function(t,e){var i=this;this.layer.graphics.forEach(function(t){t.attributes.selected||i.setGraphicStatus(t.attributes)}),t.selected=e,this.setGraphicStatus(t)},e.prototype.setGraphicStatus=function(t){var e=this.getGraphicById(t.id);e.setSymbol({className:this.getClassName(t),imageUrl:this.getImageUrl(t)}),e.draw()},e.prototype.updateStatus=function(){var t=this;t.isLoading=!0,t.fireEvent("updateStatus",{action:"start"}),this.businessService.getLastStatus().then(function(e){t.isLoading=!1,t.saveGraphicList(e),t.fireEvent("updateStatus",{action:"end",attributes:e})}).catch(function(e){t.isLoading=!1,console.log("\u52a0\u8f7d\u5361\u53e3\u72b6\u6001\u65f6\u53d1\u751f\u4e86\u9519\u8bef\uff1a",e),t.fireEvent("updateStatus",{action:"error",attributes:e})})},e}(a8272.FlagwindBusinessLayer),a8272.EsriPointLayer=a8273,function(t){t.ROUTE_LAYER_OPTIONS={routeType:"Line",movingImageUrl:"",routeUrl:"http://27.17.34.22:6080/arcgis/rest/services/Features/NAServer/Route",speed:100,minSpeedRatio:.25,maxSpeedRatio:4,trackLevel:2,onLineStartEvent:function(t,e,i){console.log("onLineStartEvent")},onLineEndEvent:function(t,e,i){console.log("onLineEndEvent")},onMoveEvent:function(t,e,i,n){console.log("onMoveEvent")},onStationEvent:function(t,e,i,n,o){console.log("onStationEvent")}},t.TRACKLINE_OPTIONS={markerUrl:"../examples/scripts/images/carTop.png",markerLabel:"",markerHeight:48,markerWidth:48};var e=function(){function e(e,i,n){this.flagwindMap=e,this.layerName=i,this.options=n,this.trackLines=[],this.activedtrackLineName="",this.options=__assign({},t.ROUTE_LAYER_OPTIONS,n),this.moveLineLayer=this.onCreateLineLayer(i+"LineLayer"),this.moveMarkLayer=this.onCreateMovingLayer(i+"MarkerLayer"),this.onAddLayerBefor(),this.moveLineLayer.appendTo(this.flagwindMap.innerMap),this.moveMarkLayer.appendTo(this.flagwindMap.innerMap),this.onAddLayerAfter();var o=this;this.flagwindMap.loaded?o.onLoad():this.flagwindMap.on("load",function(){o.onLoad()},this)}return Object.defineProperty(e.prototype,"spatial",{get:function(){return this.flagwindMap.spatial},enumerable:!0,configurable:!0}),e.prototype.show=function(){this.moveMarkLayer&&this.moveMarkLayer.show(),null!=this.moveLineLayer&&this.moveLineLayer.show()},e.prototype.hide=function(){this.moveMarkLayer&&this.moveMarkLayer.hide(),this.moveLineLayer&&this.moveLineLayer.hide()},e.prototype.getTrackLine=function(t){var e=this.trackLines.filter(function(e){return e.name===t});return e&&e.length>0?e[0]:null},e.prototype.addTrackSegment=function(e,i,n){var o=this.getTrackLine(e);o||(o=new t.TrackLine(this.flagwindMap,e,n),this.trackLines.push(o)),o.add(i)},e.prototype.getNextSegmentIndex=function(t){var e=this.getTrackLine(t);return e?e.nextSegmentIndex:0},e.prototype.getNextSegment=function(t,e){var i=this.getTrackLine(t);if(i)return i.getNextSegment(e)},e.prototype.getLastSegment=function(t){var e=this.getTrackLine(t);if(e)return e.lastSegment},e.prototype.getActiveCompletedSegment=function(t){var e=this.getTrackLine(t);if(e)return e.activeCompletedSegment},e.prototype.getIsRunning=function(t){var e=this.getTrackLine(t);return!!e&&e.isRunning},e.prototype.stop=function(t){var e=this.getTrackLine(t);null!=e&&e.stop()},e.prototype.move=function(t){var e=this.getTrackLine(t);e&&e.move()},e.prototype.start=function(t){var e=this.getTrackLine(t);e&&(e.stop(),e.start())},e.prototype.pause=function(t){var e=this.getTrackLine(t);e&&e.pause()},e.prototype.continue=function(t){var e=this.getTrackLine(t);e&&e.continue()},e.prototype.changeSpeed=function(t,e){var i=this.getTrackLine(t);i&&i.changeSpeed(e)},e.prototype.speedUp=function(t){var e=this.getTrackLine(t);return e?e.speedUp():"\u5f53\u524d\u8def\u7ebf\u4e3a\u7a7a\uff01"},e.prototype.speedDown=function(t){var e=this.getTrackLine(t);return e?e.speedDown():"\u5f53\u524d\u8def\u7ebf\u4e3a\u7a7a\uff01"},e.prototype.clear=function(t){if(t){var e=this.getTrackLine(t);if(null==e)return;e.stop(),this.moveMarkLayer.removeGraphicByName(t),this.moveLineLayer.removeGraphicByName(t),e.markerGraphic=null;var i=this.trackLines.indexOf(e);i>=0&&this.trackLines.splice(i,1)}else this.moveMarkLayer.clear(),this.moveLineLayer.clear(),this.trackLines=[]},e.prototype.clearLine=function(t){t?this.moveLineLayer.removeGraphicByName(t):console.error("\u6ca1\u6709\u6307\u5b9a\u6e05\u9664\u7684\u7ebf\u8def\u540d\u79f0")},e.prototype.clearAll=function(){window.stop(),this.checkMapSetting();for(var t=0;t<this.trackLines.length;t++){var e=this.trackLines[t];e.stop(),e.reset()}this.trackLines=[],this.moveMarkLayer&&this.moveMarkLayer.clear(),this.moveLineLayer&&this.moveLineLayer.clear()},e.prototype.deleteTrackToolBox=function(){var t=document.getElementById("route-ctrl-group");t&&t.remove()},e.prototype.showTrackToolBox=function(){if(document.getElementById("route-ctrl-group"))return console.log("TrackToolBox\u5df2\u7ecf\u521b\u5efa\uff0c\u4e0d\u53ef\u91cd\u590d\u521b\u5efa\uff01"),void(document.getElementById("route-ctrl-group").style.display="block");var t=this,e=document.createElement("div");e.setAttribute("id","route-ctrl-group"),e.innerHTML='<div class="tool-btns"><span class="route-btn icon-continue" title="\u64ad\u653e" data-operate="continue"></span>\n                <span class="route-btn icon-pause" title="\u6682\u505c" data-operate="pause" style="display:none;"></span>\n                <span class="route-btn icon-speedDown" title="\u51cf\u901f" data-operate="speedDown"></span>\n                <span class="route-btn icon-speedUp" title="\u52a0\u901f" data-operate="speedUp"></span>\n                <span class="route-btn icon-clear" title="\u6e05\u9664\u8f68\u8ff9" data-operate="clear"></span></div>\n                <div class="tool-text"><span></span></div>',this.flagwindMap.innerMap._container.appendChild(e);var i=document.querySelector("#route-ctrl-group .icon-continue"),n=document.querySelector("#route-ctrl-group .icon-pause"),o=document.querySelector("#route-ctrl-group .icon-speedUp"),r=document.querySelector("#route-ctrl-group .icon-speedDown"),a=document.querySelector("#route-ctrl-group .icon-clear"),s=document.querySelector("#route-ctrl-group .tool-text span");i.onclick=function(){t.continue(t.activedtrackLineName),i.style.display="none",n.style.display="block",s.innerHTML="\u5f53\u524d\u72b6\u6001\uff1a\u6b63\u5728\u64ad\u653e"},n.onclick=function(){t.pause(t.activedtrackLineName),i.style.display="block",n.style.display="none",s.innerHTML="\u5f53\u524d\u72b6\u6001\uff1a\u5df2\u6682\u505c"},o.onclick=function(){s.innerHTML=t.speedUp(t.activedtrackLineName)},r.onclick=function(){s.innerHTML=t.speedDown(t.activedtrackLineName)},a.onclick=function(){t.clearAll(),s.innerHTML=""}},e.prototype.solveSegment=function(e,i,n){if(n=__assign({},t.TRACKLINE_OPTIONS,n),this.checkMapSetting(),i.length<1)throw Error("\u7ad9\u70b9\u4e0d\u80fd\u5c11\u4e8e2");this.activedtrackLineName=e;var o=this.onGetStandardStops(e,i),r=this.getLastSegment(e),a=r?r.index+1:0;if(r){var s=this.onEqualGraphic(r.endGraphic,o[0]);"NA"===this.options.routeType&&!s&&(this.post(a,e,r.endGraphic,o[0],n),a+=1)}for(var l=0;l<o.length-1;l++){var p=o[l],h=o[l+1];this.post(a+l,e,p,h,n)}},e.prototype.post=function(e,i,n,o,r,a){void 0===a&&(a=[]);var s=this,l=r;l.onShowSegmentLineEvent=function(t){s.onShowSegmentLineEvent(s,t,r)},l.onMoveStartEvent=function(t,e,i){s.onMoveStartEvent(s,t,e,i)},l.onMoveEvent=function(t,e,i){s.onMoveEvent(s,t,e,i)},l.onMoveEndEvent=function(t,e,i){s.onMoveEndEvent(s,t,e,i)};var p=new t.TrackSegment(this,e,i,n,o,l);a&&(p.waypoints=a),this.addTrackSegment(i,p,r),"NA"===this.options.routeType?this.onSolveByService(p,n,o,a):this.onSolveByJoinPoint(p)},e.prototype.solveComplete=function(t,e){var i=t.polyline,n=t.length;e.setPolyLine(i,n),this.onCreateSegmentLineComplete(e)},e.prototype.errorHandler=function(t,e){console.log("\u8def\u7531\u5206\u6790\u5f02\u5e38"+t);var i=[];if(i.push(e.startGraphic.geometry),e.waypoints)for(var n=0;n<e.waypoints.length;n++)i.push(e.waypoints[n].geometry);i.push(e.endGraphic.geometry),e.setMultPoints(i),this.onCreateSegmentLineComplete(e)},e.prototype.onCreateSegmentLineComplete=function(t){console.log()},e.prototype.checkMapSetting=function(){},e.prototype.onShowSegmentLineEvent=function(t,e,i){t.onShowSegmentLine(e)},e.prototype.onMoveStartEvent=function(t,e,i,n){var o=t.getTrackLine(e.name);void 0!==o&&(o.markerGraphic||t.onCreateMoveMark(o,i,n),t.flagwindMap.centerAt(i.geometry.x,i.geometry.y),e.lineGraphic||t.onShowSegmentLine(e),t.options.onStationEvent(e.name,e.index,i,!0,t.getTrackLine(e.name)),0===e.index&&this.options.onLineStartEvent(e.name,e.index,t.getTrackLine(e.name)))},e.prototype.onMoveEndEvent=function(t,e,i,n){var o=t.getNextSegment(e.name,e.index),r=t.getTrackLine(e.name);o?(t.options.onStationEvent(e.name,e.index,i,!1,r),o.start()):(t.options.onStationEvent(e.name,e.index,i,!1,r),e.stop(),t.options.onLineEndEvent(e.name,e.index,r))},e.prototype.onMoveEvent=function(t,e,i,n){var o=this.flagwindMap.onCreatePoint({x:parseFloat(i[0]),y:parseFloat(i[1]),spatial:t.flagwindMap.spatial}),r=t.getTrackLine(e.name);r&&(t.onChangeMovingGraphicSymbol(r,o,n),t.options.onMoveEvent(e.name,e.index,i,n))},e.prototype.onAddLayerBefor=function(){console.log("onAddLayerBefor")},e.prototype.onAddLayerAfter=function(){console.log("onAddLayerAfter")},e.prototype.onLoad=function(){var t=this;this.moveMarkLayer.on("onClick",function(e){t.options.onMovingClick&&t.options.onMovingClick(e)},this)},e}();t.FlagwindRouteLayer=e}(flagwind||(flagwind={})),a8521=flagwind||(flagwind={}),a8522=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.trackLines=[],e}return __extends(e,t),e.prototype.onSetSegmentByLine=function(t,e){var i=t.polyline,n=t.length;if(i.paths.length>0){var o=i.paths,r=e.options.numsOfKilometer;void 0===r&&(r=100),e.line=a8521.MapUtils.vacuate([o],n,r)}},e.prototype.onSetSegmentByPoint=function(t,e){for(var i=t.points,n=e.options.numsOfKilometer,o=new esri.geometry.Polyline(this.flagwindMap.spatial),r=0;r<i.length-1;r++){var a=i[r],s=i[r+1],l=new esri.geometry.Polyline(this.flagwindMap.spatial).addPath([a,s]),p=esri.geometry.geodesicLengths([l],esri.Units.KILOMETERS)[0],h=a8521.MapUtils.extractPoints(a,s,p*n);o.addPath(h)}e.length=esri.geometry.geodesicLengths([o],esri.Units.KILOMETERS)[0],e.polyline=o,e.line=a8521.MapUtils.vacuate([e.polyline.paths],e.length,n)},e.prototype.onShowSegmentLine=function(t){var e=new esri.symbol.CartographicLineSymbol(esri.symbol.CartographicLineSymbol.STYLE_SOLID,new esri.Color([38,101,196,.8]),4,esri.symbol.CartographicLineSymbol.CAP_ROUND,esri.symbol.CartographicLineSymbol.JOIN_MITER,2);t.lineGraphic=this.getStandardGraphic(new esri.Graphic(t.polyline,e,{type:"segment",index:t.index,line:t.name})),this.moveLineLayer.addGraphic(t.name,t.lineGraphic)},e.prototype.onCreateMoveMark=function(t,e,i){var n=t.options.markerUrl,o=t.options.markerHeight||48,r=t.options.markerWidth||48,a=new esri.symbol.PictureMarkerSymbol(n,o,r),s=this.getStandardGraphic(new esri.Graphic(e.geometry,a,{type:"marker",line:t.name}));t.markerGraphic=s,this.moveMarkLayer.addGraphic(t.name,s)},e.prototype.onCreateLineLayer=function(t){return new a8521.EsriGroupLayer(t)},e.prototype.onCreateMovingLayer=function(t){return new a8521.EsriGroupLayer(t)},e.prototype.onEqualGraphic=function(t,e){return a8521.MapUtils.isEqualPoint(t.geometry,e.geometry)},e.prototype.onGetStandardStops=function(t,e){for(var i=[],n=(new esri.symbol.SimpleMarkerSymbol).setStyle(esri.symbol.SimpleMarkerSymbol.STYLE_CROSS).setSize(15).outline.setWidth(3),o=0;o<e.length;o++)e[o]instanceof Array?i.push(this.getStandardGraphic(new esri.Graphic(new esri.geometry.Point(e[o][0],e[o][1]),n,{type:"stop",line:t}))):(e[o].declaredClass||"").indexOf("Point")>0?i.push(this.getStandardGraphic(new esri.Graphic(e[o],n,{type:"stop",line:t}))):i.push(this.getStandardGraphic(new esri.Graphic(e[o].geometry,n,{type:"stop",model:e[o].attributes,line:t})));return i},e.prototype.onSolveByService=function(t,e,i,n){var o=new esri.tasks.RouteTask(this.options.routeUrl),r=new esri.tasks.RouteParameters;r.stops=new esri.tasks.FeatureSet,r.returnRoutes=!0,r.returnDirections=!0,r.directionsLengthUnits=esri.Units.MILES,r.outSpatialReference=this.getSpatialReferenceFormNA();var a=this;if(o.on("solve-complete",function(e){var i=e.result.routeResults[0],n=i.route.geometry,o=i.directions.totalLength;a.solveComplete({polyline:n,length:o},t)}),o.on("error",function(e){a.errorHandler(e,t)}),r.stops.features.push(this.cloneStopGraphic(e)),n)for(var s=0;s<n.length;s++)r.stops.features.push(this.cloneStopGraphic(n[s]));r.stops.features.push(this.cloneStopGraphic(i)),o.solve(r)},e.prototype.onSolveByJoinPoint=function(t){var e=[];if(e.push(t.startGraphic.geometry),t.waypoints)for(var i=0;i<t.waypoints.length;i++)e.push(t.waypoints[i].geometry);e.push(t.endGraphic.geometry),t.setMultPoints(e)},e.prototype.onAddEventListener=function(t,e,i){t.layer.on(e,i)},e.prototype.getSpatialReferenceFormNA=function(){return new esri.SpatialReference({wkid:this.flagwindMap.spatial.wkid})},e.prototype.getStandardGraphic=function(t){return t},e.prototype.cloneStopGraphic=function(t){return this.getStandardGraphic(new esri.Graphic(t.geometry,t.symbol,{type:t.attributes.type,line:t.attributes.line}))},e.prototype.onChangeMovingGraphicSymbol=function(t,e,i){if(void 0!==t){var n=t.markerGraphic.symbol;n.setAngle(360-i),t.markerGraphic.setSymbol(n),t.markerGraphic.setGeometry(e),t.markerGraphic.draw()}},e}(a8521.FlagwindRouteLayer),a8521.EsriRouteLayer=a8522,function(t){t.SELECT_BOX_OPTIONS_ESRI={onCheckChanged:function(t){}};var e=function(e){function i(i,n){var o=e.call(this,null)||this;o.flagwindMap=i,o.options=n,o.layers=[],n=__assign({},t.SELECT_BOX_OPTIONS_ESRI,n),o.options=n,o.draw=new esri.toolbars.Draw(i.map,{drawTime:75,showTooltips:!0,tolerance:8,tooltipOffset:15});var r=o;return o.draw.on("draw-complete",function(t){r.onCreateRecord(r,t)}),o}return __extends(i,e),i.prototype.onCreateRecord=function(t,e){var i=this,n=e.geometry;t.layers.forEach(function(t){var e=[];t.graphics.forEach(function(t){n.contains(t.geometry)&&(console.log(t),e.push(t))});var o=e.map(function(t){return t.attributes});t.setSelectStatusByModels(o,!1),i.options.onCheckChanged(o)}),t.clear()},i.prototype.addLayer=function(t){t.options.enableSelectMode=!0,this.layers.push(t)},i.prototype.deleteSelectBar=function(){var t=document.getElementById("edit-ctrl-group");t&&t.remove()},i.prototype.showSelectBar=function(){if(document.getElementById("edit-ctrl-group"))return console.log("\u7ed8\u5236\u63a7\u4ef6\u5df2\u7ecf\u521b\u5efa\uff0c\u4e0d\u53ef\u91cd\u590d\u521b\u5efa\uff01"),void(document.getElementById("edit-ctrl-group").style.display="block");var t=this,e=this.flagwindMap.innerMap.root,i=document.createElement("div");i.setAttribute("id","edit-ctrl-group"),i.innerHTML='<div class="edit-btn" title="\u753b\u5706" data-operate="circle"><span class="iconfont icon-draw-circle"></span></div>\n                <div class="edit-btn" title="\u753b\u77e9\u5f62" data-operate="rectangle"><span class="iconfont icon-draw-square"></span></div>\n                <div class="edit-btn" title="\u753b\u591a\u8fb9\u5f62" data-operate="polygon"><span class="iconfont icon-draw-polygon1"></span></div>',e.appendChild(i);for(var n=document.querySelectorAll("#edit-ctrl-group .edit-btn"),o=0;o<n.length;o++)n[o].onclick=function(){t.active(this.dataset.operate)}},i.prototype.clear=function(){this.draw&&(this.draw.deactivate(),this.flagwindMap.map.enableMapNavigation(),this.mode="trash")},i.prototype.active=function(t){if(this.draw&&t){var e=t.toUpperCase().replace(/ /g,"_");this.flagwindMap.map.disableMapNavigation(),this.draw.activate(esri.toolbars.Draw[e]),this.mode=t}},i}(t.EventProvider);t.EsriSelectBox=e}(flagwind||(flagwind={})),a8650=flagwind||(flagwind={}),a8651=function(){function t(t,e,i,n){this.id=t,this.url=e,this.spatial=i,this.title=n,this.isShow=!0,e&&(this.layer=this.onCreateTiledLayer({url:e,id:t,title:n,spatial:i}))}return t.prototype.appendTo=function(t){this.layer&&this.layer.addToMap(t)},t.prototype.removeLayer=function(t){this.layer.removeFromMap(t)},t.prototype.show=function(){this.isShow=!0,this.layer.show()},t.prototype.hide=function(){this.isShow=!1,this.layer.hide()},t}(),a8650.FlagwindTiledLayer=a8651,a8666=flagwind||(flagwind={}),a8667=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onCreateTiledLayer=function(t){var e=new esri.layers.ArcGISTiledMapServiceLayer(t.url,{id:t.id,SpatialReference:t.spatial});return e.addToMap=function(t){t.addLayer(this)},e.removeFromMap=function(t){t.removeLayer(this)},e},e}(a8666.FlagwindTiledLayer),a8666.EsriTiledLayer=a8667,a8680=flagwind||(flagwind={}),a8681=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.vehicleOptions={dataType:"marker",symbol:{className:"route-point",imageUrl:"",width:10,height:10}},e}return __extends(e,t),e.prototype.showTrack=function(t,e,i){this.vehicleOptions=__assign({},this.vehicleOptions,i);var n=this.getStopsGraphicList(e);this.solveSegment(t,n,this.vehicleOptions)},e.prototype.getStopsGraphicList=function(t){var e=this,i=[];return t.forEach(function(t){(t=e.changeStandardModel(t)).id&&t.longitude&&t.latitude&&i.push(new a8680.EsriMarkerGraphic({id:t.id,dataType:e.vehicleOptions.dataType,symbol:e.vehicleOptions.symbol,point:new a8680.EsriPoint(t.longitude,t.latitude,e.flagwindMap.spatial),spatial:e.flagwindMap.spatial,attributes:t}))}),i},e.prototype.changeStandardModel=function(t){return t.id=t.id||t.tollCode||t.equipmentCode,t.longitude=t.longitude||t.tollLongitude,t.latitude=t.latitude||t.tollLatitude,t},e}(a8680.EsriRouteLayer),a8680.EsriVehicleRouteLayer=a8681,function(t){var e=function(){return function(t,e){this.type=t,this.spatial=e}}();t.EsriGeometry=e;var i=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,"Polyline",e)||this;return i.path=[],i}return __extends(e,t),e.prototype.getPoint=function(t){return this.path[t]},e.prototype.insertPoint=function(t,e){this.path.splice(t,0,e)},e.prototype.removePoint=function(t){this.path.splice(t,1)},e.prototype.toJson=function(){return{type:"geojson",data:{type:"Feature",properties:this.attributes||{},geometry:{type:"LineString",coordinates:this.path}}}},e}(e);t.EsriPolyline=i;var n=function(t){function e(e,i,n){void 0===n&&(n=null);var o=t.call(this,"Point",n)||this;return o.x=e,o.y=i,o.spatial=n,o.point=new esri.geometry.Point(e,i,o.spatial),o}return __extends(e,t),e.prototype.toJson=function(){return{type:"Feature",properties:this.attributes||{},geometry:{type:"Point",coordinates:[this.x,this.y]}}},e}(e);t.EsriPoint=n;var o=function(){return function(t){this.wkid=t,this.spatial=t||4326}}();t.EsriSpatial=o;var r=function(e){function i(i){var n=e.call(this)||this;return n.options=i,n.GRAPHICS_MAP=new t.Map,n._isInsided=!1,n.id=i.id,n.layer=new esri.layers.GraphicsLayer({id:n.id||"deviceLayer"}),n}return __extends(i,e),Object.defineProperty(i.prototype,"isInsided",{get:function(){return this._isInsided},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"graphics",{get:function(){return 0===this.GRAPHICS_MAP.size?new Array:this.GRAPHICS_MAP.values()},enumerable:!0,configurable:!0}),i.prototype.on=function(t,e,i,n){void 0===i&&(i=this),void 0===n&&(n=!1),this.addListener(t,e,i,n)},i.prototype.off=function(t,e,i){void 0===i&&(i=this),this.removeListener(t,e,i)},i.prototype.show=function(){this.GRAPHICS_MAP.forEach(function(t){t.value.isShow||t.value.show()})},i.prototype.hide=function(){this.GRAPHICS_MAP.forEach(function(t){t.value.isShow&&t.value.hide()})},i.prototype.remove=function(t){this.GRAPHICS_MAP.delete(t.attributes.id),t.isInsided&&t.delete()},i.prototype.clear=function(){this.GRAPHICS_MAP.forEach(function(t){return t.value.remove()}),this.GRAPHICS_MAP.clear()},i.prototype.add=function(t){this.GRAPHICS_MAP.set(t.attributes.id,t),t.layer=this,this.layer&&t.addTo(this.layer)},i.prototype.addToMap=function(t){var e=this;this.layer||(this.layer=new esri.layers.GraphicsLayer({id:this.options.id||"deviceLayer"})),this.GRAPHICS_MAP.forEach(function(t){t.value.addTo(e.layer)}),t.addLayer(this.layer),this.map=t,this._isInsided=!0},i.prototype.removeFromMap=function(t){this.GRAPHICS_MAP.forEach(function(t){t.value.remove()}),this._isInsided=!1},i}(t.EventProvider);t.EsriGraphicsLayer=r}(flagwind||(flagwind={})),a8779=flagwind||(flagwind={}),a8780=function(){return function(){this.mapDomain="minedata.cn",this.mapVersion="v1.3",this.accessToken="25cc55a69ea7422182d00d6b7c0ffa93",this.units=.03,this.center=[116.46,39.92],this.wkidFromApp=4326,this.is25D=!1,this.minZoom=9,this.maxZoom=17,this.zoom=16,this.logo=!1,this.slider=!0,this.sliderPosition="bottom-left"}}(),a8779.EsriSetting=a8780,(flagwind||(flagwind={})).EDIT_LAYER_OPTIONS={onEditInfo:function(t,e,i,n){console.log("onEditInfo")}},(flagwind||(flagwind={})).LOCATION_LAYER_OPTIONS={onMapClick:function(t){console.log("onMapClick")}},function(t){t.TRACKSEGMENT_OPTIONS={speed:100,numsOfKilometer:50,autoShowLine:!1,onShowSegmentLineEvent:function(t){console.log("onShowSegmentLineEvent")},onMoveStartEvent:function(t,e,i){console.log("onMoveStartEvent")},onMoveEndEvent:function(t,e,i){console.log("onMoveEndEvent")},onMoveEvent:function(t,e,i){console.log("onMoveEvent")}};var e=function(){function e(e,i,n,o,r,a){this.flagwindRouteLayer=e,this.index=i,this.name=n,this.startGraphic=o,this.endGraphic=r,this.options=a,this.position=-1,this.isCompleted=!1,this.isRunning=!1,this.time=200,this.waypoints=[],this.options=__assign({},t.TRACKSEGMENT_OPTIONS,a)}return e.prototype.setPolyLine=function(t,e){this.flagwindRouteLayer.onSetSegmentByLine({polyline:t,length:e},this),this.speed||this.changeSpeed(),this.options.onShowSegmentLineEvent(this)},e.prototype.setMultPoints=function(t){this.flagwindRouteLayer.onSetSegmentByPoint({points:t,spatial:this.flagwindRouteLayer.flagwindMap.spatial},this),this.speed||this.changeSpeed(),console.debug("\u8def\u6bb5"+this.index+"\u957f\u5ea6\uff1a"+this.length+"km"),console.debug("\u8def\u6bb5"+this.index+"\u53d6\u70b9\uff1a"+this.line.length+"\u4e2a"),console.debug("\u8def\u6bb5"+this.index+"\u901f\u5ea6\uff1a"+this.speed+"km/h"),console.debug("\u8def\u6bb5"+this.index+"\u5b9a\u65f6\uff1a"+this.time+"ms"),this.options.onShowSegmentLineEvent(this)},e.prototype.changeSpeed=function(t){void 0===t&&(t=null),0===this.options.numsOfKilometer?(this.speed=1e7,this.time=1):(this.speed=t||this.options.speed,this.time=3600*(this.length||0)/(15*(this.speed||100)*this.line.length)),this.timer&&(this.pause(),this.start())},e.prototype.move=function(e){e.position=e.position+1;var i=0;if(0===e.position)return e.line.length>1&&(i=t.MapUtils.getAngle(e.startGraphic.geometry,{x:e.line[0][0],y:e.line[0][1]})||0),e.options.onMoveStartEvent(e,e.startGraphic,i),void e.options.onMoveEvent(e,[e.startGraphic.geometry.x,e.startGraphic.geometry.y],i);if(e.position>=e.line.length)return this.line.length>1&&(i=t.MapUtils.getAngle({x:this.line[e.line.length-1][0],y:this.line[e.line.length-1][1]},this.endGraphic.geometry)||0),e.isCompleted=!0,e.stop(),e.options.onMoveEvent(e,[e.endGraphic.geometry.x,e.endGraphic.geometry.y],i),void e.options.onMoveEndEvent(e,e.endGraphic,i);i=t.MapUtils.getAngle({x:this.line[this.position-1][0],y:this.line[this.position-1][1]},{x:this.line[this.position][0],y:this.line[this.position][1]});var n=parseFloat(e.line[this.position-1][0]).toFixed(5),o=parseFloat(e.line[this.position-1][1]).toFixed(5);e.options.onMoveEvent(e,[n,o],i)},e.prototype.start=function(){this.isRunning=!0;var t=this;return t.timer=window.setInterval(function(){t.line?t.move(t):console.log("\u7ebf\u8def"+t.name+"\u7684\u7b2c"+(t.index+1)+"\u8def\u6bb5\u7b49\u5f85\u8bbe\u7f6e")},t.time),!0},Object.defineProperty(e.prototype,"isPaused",{get:function(){return!this.timer&&this.isRunning},enumerable:!0,configurable:!0}),e.prototype.pause=function(){window.clearInterval(this.timer),this.timer=null},e.prototype.stop=function(){this.timer&&window.clearInterval(this.timer),this.timer=null,this.isRunning=!1,this.position=-1},e.prototype.reset=function(){this.timer=null,this.isRunning=!1,this.position=-1,this.isCompleted=!1},e}();t.TrackSegment=e;var i=function(){function e(e,i,n){this.flagwindMap=e,this.name=i,this.options=n,this.segments=[],this.isMovingGraphicHide=!1,this.options=__assign({},t.TRACKSEGMENT_OPTIONS,n)}return e.prototype.hideMovingGraphic=function(){this.isMovingGraphicHide=!0,this.markerGraphic.hide()},e.prototype.showMovingGraphic=function(){this.isMovingGraphicHide&&(this.isMovingGraphicHide=!1,this.markerGraphic.show())},Object.defineProperty(e.prototype,"isRunning",{get:function(){if(0===this.segments.length)return!1;for(var t=0;t<this.segments.length;t++){if(!0===this.segments[t].isRunning)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCompleted",{get:function(){if(0===this.segments.length)return!1;for(var t=0;t<this.segments.length;t++){if(!1===this.segments[t].isCompleted)return!1}return!0},enumerable:!0,configurable:!0}),e.prototype.changeSpeed=function(t){if(0!==this.segments.length)for(var e=0;e<this.segments.length;e++){this.segments[e].changeSpeed(t)}},e.prototype.speedUp=function(){return this.speed||(this.speed=this.options.speed),this.speed<800?(this.speed=Math.max(2*this.speed,this.options.speed),this.changeSpeed(this.speed),"\u5f53\u524d\u72b6\u6001\uff1a"+this.speed/this.options.speed+"\u500d\u64ad\u653e"):"\u6700\u5927\u901f\u5ea6\uff1a4\u500d\u64ad\u653e"},e.prototype.speedDown=function(){return this.speed||(this.speed=this.options.speed),this.speed=Math.max(this.speed/2,this.options.speed),this.changeSpeed(this.speed),"\u5f53\u524d\u72b6\u6001\uff1a"+this.speed/this.options.speed+"\u500d\u64ad\u653e"},e.prototype.start=function(){if(!this.isRunning){for(var t=this.segments[0],e=0;e<this.segments.length;e++){var i=this.segments[e];t.index>i.index&&(t=i)}t.start()}},e.prototype.stop=function(){for(var t=0;t<this.segments.length;t++){this.segments[t].stop()}},e.prototype.reset=function(){for(var t=0;t<this.segments.length;t++){this.segments[t].reset()}},e.prototype.pause=function(){for(var t=0;t<this.segments.length;t++){var e=this.segments[t];if(e.isRunning)return void e.pause()}},e.prototype.continue=function(){this.isRunning||this.start();for(var t=0;t<this.segments.length;t++){var e=this.segments[t];if(e.isRunning&&!e.timer)return void e.start()}},e.prototype.move=function(){if(!this.isRunning){var t=this.activeCompletedSegment,e=null;(e=t?this.getSegment(t.index+1):this.getSegment(0))&&e.start()}},e.prototype.add=function(t){this.segments.push(t)},Object.defineProperty(e.prototype,"nextSegmentIndex",{get:function(){if(0===this.segments.length)return 0;for(var t=0,e=0;e<this.segments.length;e++){var i=this.segments[e];i.index>t&&(t=i.index)}return t>0&&(t+=1),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastSegment",{get:function(){if(0===this.segments.length)return null;for(var t=null,e=0;e<this.segments.length;e++){var i=this.segments[e];(!t||i.index>t.index)&&(t=i)}return t},enumerable:!0,configurable:!0}),e.prototype.getNextSegment=function(t){return 0===this.segments.length?null:this.getSegment(t+1)},e.prototype.getSegment=function(t){var e=null;if(0===this.segments.length)return null;for(var i=0;i<this.segments.length;i++){var n=this.segments[i];n.name===this.name&&n.index===t&&(e=n)}return e},Object.defineProperty(e.prototype,"activeCompletedSegment",{get:function(){var t=null;if(0!==this.segments.length){for(var e=0;e<this.segments.length;e++){var i=this.segments[e];i.isCompleted&&(null==t||i.index>t.index)&&(t=i)}return t}},enumerable:!0,configurable:!0}),e}();t.TrackLine=i}(flagwind||(flagwind={})),a8902=flagwind||(flagwind={}),a8903=function(){function t(){}return t.density=function(t,e,i){var n=[];if(0===i)return n.push(t),n.push(e),n;for(var o=(e.x-t.x)/i,r=(e.y-t.y)/i,a=0;a<i;a++)n.push(new a8902.MinemapPoint(t.x+a*o,t.y+a*r));return n.push({x:e.x,y:e.y}),n},t.extractPoints=function(t,e,i){var n=[];if(0===i)return n.push({x:t.x,y:t.y}),n.push({x:e.x,y:e.y}),n;for(var o=(e.x-t.x)/i,r=(e.y-t.y)/i,a=0;a<i;a++)n.push({x:t.x+a*o,y:t.y+a*r});return n.push({x:e.x,y:e.y}),n},t.vacuate=function(t,e,i){if(0===i){var n=t[0],o=t[t.length-1];return[n[0],o[o.length-1]]}for(var r=[],a=0;a<t.length;a++)r=r.concat(t[a]);var s=e*i;if(r.length>s){for(var l=0,p=Math.max(Math.floor(r.length/s),1),h=[];l<s;)h.push(r[l]),l+=p;return l!==r.length-1&&h.push(r[r.length-1]),h}return r},t.isEqualPoint=function(t,e){return null==t&&null==e&&(t.x===e.x&&t.y===e.y)},t.getAngle=function(t,e){var i=t.x,n=t.y,o=e.x-i,r=e.y-n;return o>0&&r>=0?Math.round(Math.atan(r/o)/Math.PI*180):o>0&&r<0?360+Math.round(Math.atan(r/o)/Math.PI*180):o<0&&r>=0?180+Math.round(Math.atan(r/o)/Math.PI*180):o<0&&r<0?180+Math.round(Math.atan(r/o)/Math.PI*180):0===o?90:0},t.validGeometryModel=function(t){return t.longitude&&t.latitude},t.delta=function(e,i){var n=.006693421622965943,o=t.transformLat(i-105,e-35),r=t.transformLon(i-105,e-35),a=e/180*t.PI,s=Math.sin(a);s=1-n*s*s;var l=Math.sqrt(s);return{lat:o=180*o/(6335552.717000426/(s*l)*t.PI),lon:r=180*r/(6378245/l*Math.cos(a)*t.PI)}},t.point25To2=function(t,e){return{lat:(0-321586.1*t-629486.1*e+0xdb613eebb21-34214413461469.996)/-512844508966.97,lon:(380061.7*t-850786*e+20375618547620+40435790429590)/512844508966.97}},t.point2To25=function(t,e){return{lat:380061.7*e-321586.1*t+23949170,lon:629486.1*t+850786*e-106392700}},t.mercatorUnproject=function(t,e){for(var i=180/Math.PI,n=Math.sqrt(.00669437999014133),o=Math.exp(-e/6378137),r=Math.PI/2-2*Math.atan(o),a=.1,s=0,l=0;l<15&&Math.abs(a)>1e-7;l++)s=n*Math.sin(r),s=Math.pow((1-s)/(1+s),n/2),r+=a=Math.PI/2-2*Math.atan(o*s)-r;return{lat:r*i,lon:t*i/6378137}},t.gcj_encrypt=function(e,i){if(t.outOfChina(e,i))return{lat:e,lon:i};var n=t.delta(e,i);return{lat:e+n.lat,lon:i+n.lon}},t.gcj_decrypt=function(e,i){if(t.outOfChina(e,i))return{lat:e,lon:i};var n=t.delta(e,i);return{lat:e-n.lat,lon:i-n.lon}},t.gcj_decrypt_exact=function(e,i){for(var n,o,r=.01,a=.01,s=e-r,l=i-a,p=e+r,h=i+a,c=0;;){n=(s+p)/2,o=(l+h)/2;var u=t.gcj_encrypt(n,o);if(r=u.lat-e,a=u.lon-i,Math.abs(r)<1e-9&&Math.abs(a)<1e-9)break;if(r>0?p=n:s=n,a>0?h=o:l=o,++c>1e4)break}return{lat:n,lon:o}},t.bd_encrypt=function(e,i){var n=i,o=e,r=Math.sqrt(n*n+o*o)+2e-5*Math.sin(o*t.X_PI),a=Math.atan2(o,n)+3e-6*Math.cos(n*t.X_PI),s=r*Math.cos(a)+.0065;return{lat:r*Math.sin(a)+.006,lon:s}},t.bd_decrypt=function(e,i){var n=i-.0065,o=e-.006,r=Math.sqrt(n*n+o*o)-2e-5*Math.sin(o*t.X_PI),a=Math.atan2(o,n)-3e-6*Math.cos(n*t.X_PI),s=r*Math.cos(a);return{lat:r*Math.sin(a),lon:s}},t.mercator_encrypt=function(e,i){var n=20037508.34*i/180,o=Math.log(Math.tan((90+e)*t.PI/360))/(t.PI/180);return{lat:o=20037508.34*o/180,lon:n}},t.lonlat2mercator=function(t,e){var i={lon:0,lat:0},n=20037508.34*e/180,o=Math.log(Math.tan((90+t)*Math.PI/360))/(Math.PI/180);return o=20037508.34*o/180,i.lon=n,i.lat=o,i},t.mercator2lonlat=function(t,e){var i={lon:0,lat:0},n=e/20037508.34*180,o=t/20037508.34*180;return o=180/Math.PI*(2*Math.atan(Math.exp(o*Math.PI/180))-Math.PI/2),i.lon=n,i.lat=o,i},t.mercator_decrypt=function(e,i){var n=i/20037508.34*180,o=e/20037508.34*180;return{lat:o=180/t.PI*(2*Math.atan(Math.exp(o*t.PI/180))-t.PI/2),lon:n}},t.distance=function(e,i,n,o){var r=Math.cos(e*t.PI/180)*Math.cos(n*t.PI/180)*Math.cos((i-o)*t.PI/180)+Math.sin(e*t.PI/180)*Math.sin(n*t.PI/180);return r>1&&(r=1),r<-1&&(r=-1),6371e3*Math.acos(r)},t.outOfChina=function(t,e){return e<72.004||e>137.8347||(t<.8293||t>55.8271)},t.transformLat=function(e,i){var n=2*e-100+3*i+.2*i*i+.1*e*i+.2*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*t.PI)+20*Math.sin(2*e*t.PI))/3,n+=2*(20*Math.sin(i*t.PI)+40*Math.sin(i/3*t.PI))/3,n+=2*(160*Math.sin(i/12*t.PI)+320*Math.sin(i*t.PI/30))/3},t.transformLon=function(e,i){var n=300+e+2*i+.1*e*e+.1*e*i+.1*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*t.PI)+20*Math.sin(2*e*t.PI))/3,n+=2*(20*Math.sin(e*t.PI)+40*Math.sin(e/3*t.PI))/3,n+=2*(150*Math.sin(e/12*t.PI)+300*Math.sin(e/30*t.PI))/3},t.PI=3.141592653589793,t.X_PI=52.35987755982988,t}(),a8902.MapUtils=a8903,a9082=flagwind||(flagwind={}),a9083=function(){function t(t){if(!t)throw new a9082.ArgumentException("items");this._index=0,this._current=void 0,this._items=t}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),t.prototype.next=function(){var t=this._items;return this._index<t.length&&(this._current=t[this._index++],!0)},t}(),a9082.Enumerator=a9083,a9092=flagwind||(flagwind={}),a9093=function(){function t(t,e){this._key=t,this._value=e}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"["+(this._key||"")+", "+(this._value||"")+"]"},t}(),a9092.KeyValuePair=a9093,a9103=flagwind||(flagwind={}),a9104=function(){function t(){this._keys=[],this._values=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){var i=this._keys,n=i.indexOf(t);return-1===n&&(i[n=i.length]=t),this._values[n]=e,this},t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1!==e?this._values[e]:void 0},t.prototype.has=function(t){return-1!==this._keys.indexOf(t)},t.prototype.delete=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),!0)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0},t.prototype.getEnumerator=function(){var t=this.entries();return new a9103.Enumerator(t)},t.prototype.forEach=function(t,e){for(var i=this._keys,n=this._values,o=0,r=i.length;o<r;o++)t.call(e,new a9103.KeyValuePair(i[o],n[o]),this)},t.prototype.keys=function(){return this._keys},t.prototype.values=function(){return this._values},t.prototype.entries=function(){var t=new Array;return this.forEach(function(e,i){t.push(new a9103.KeyValuePair(e.key,e.value))}),t},t.prototype.toString=function(){var t=Object.create(null);return this.forEach(function(e,i){t[e.key]=e.value}),JSON.stringify(t)},t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(null==e)return null;var n=new t;return e.forEach(function(t){if(!(t instanceof Array))throw new a9103.Exception("\u53c2\u6570\u4e0d\u6b63\u786e");var e=t;n.set(e[0],e[1])}),n},t}(),a9103.Map=a9104,a9152=flagwind||(flagwind={}),a9153=function(){function t(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._values=[],(t=this._values).push.apply(t,e)}return Object.defineProperty(t.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t;i<n.length;i++){var o=n[i];this.has(o)||this._values.push(o)}return this},t.prototype.get=function(t){return this._values[t]},t.prototype.set=function(t,e){var i=this._values;t>=0&&t<i.length&&(this.has(e)||(i[t]=e))},t.prototype.delete=function(t){var e=this._values,i=e.indexOf(t);return-1!==i&&(e.splice(i,1),!0)},t.prototype.deleteAt=function(t){var e=this._values;t>=0&&t<e.length&&e.splice(t,1)},t.prototype.clear=function(){this._values.length=0},t.prototype.indexOf=function(t,e){return this._values.indexOf(t,e)},t.prototype.has=function(t){return-1!==this._values.indexOf(t)},t.prototype.getEnumerator=function(){return new a9152.Enumerator(this._values)},t.prototype.forEach=function(){for(var t=this._values,e=arguments[0],i=arguments[1],n=2===e.length,o=0,r=t.length;o<r;o++)n?e.call(i,t[o],this):e.call(i,t[o],o,this)},t.prototype.find=function(t,e){for(var i=this._values,n=0,o=i.length;n<o;n++)if(t.call(e,i[n],n,this))return i[n]},t.prototype.sort=function(t){var e=this._values;this._values=e.sort(t)},t.prototype.union=function(t){var e=t.values();return e.length>0&&this.add.apply(this,e),this},t.prototype.values=function(){return this._values.concat()},t.prototype.toString=function(){return Array.prototype.toString.call(this._values)},t}(),a9152.Set=a9153,a9209=flagwind||(flagwind={}),a9210=function(){function t(t,e){if(!t)throw new a9209.ArgumentException;this._type=t,this._data=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){if(!t)throw new a9209.ArgumentException;this._source=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),t}(),a9209.EventArgs=a9210,a9224=flagwind||(flagwind={}),a9225=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cancel=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"cancel",{get:function(){return this._cancel},set:function(t){this._cancel=t},enumerable:!0,configurable:!0}),e}(a9224.EventArgs),a9224.CancelEventArgs=a9225,a9235=flagwind||(flagwind={}),a9236=function(){function t(){this._providers=new a9235.Map}return Object.defineProperty(t.prototype,"providers",{get:function(){return this._providers},enumerable:!0,configurable:!0}),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.getProvider=function(t){if(!t)throw new a9235.ArgumentException;var e=this._providers.get(t);return e||(e=this.createProvider(t),this._providers.set(t,e)),e},t.prototype.createProvider=function(t){return new a9235.EventProvider(t)},t}(),a9235.EventProviderFactory=a9236,a9248=flagwind||(flagwind={}),a9249=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(Error),a9248.Exception=a9249,a9256=flagwind||(flagwind={}),a9257=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(a9256.Exception),a9256.ArgumentException=a9257,a9264=flagwind||(flagwind={}),a9265=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(a9264.Exception),a9264.InvalidOperationException=a9265,a9272=flagwind||(flagwind={}),a9273=function(t){function e(e){var i=t.call(this,null)||this;return i.kind="circle",i.id=e.id,i.attributes=e.attributes,i.symbol=e.symbol,i.circle=new minemap.Polyline(e.path,i.symbol),i._geometry=new a9272.MinemapCircle,i._geometry.center=e.center,i._geometry.radius=e.radius,i}return __extends(e,t),Object.defineProperty(e.prototype,"isInsided",{get:function(){return this._isInsided},enumerable:!0,configurable:!0}),e.prototype.show=function(){if(!this.layer)throw new a9272.Exception("\u8be5\u8981\u7d20\u6ca1\u6709\u6dfb\u52a0\u5230\u56fe\u5c42\u4e0a\uff0c\u82e5\u60f3\u663e\u793a\u8be5\u8981\u7d20\u8bf7\u8c03\u7528addToMap\u65b9\u6cd5");this.circle.addTo(this.layer.map),this.isShow=!1},e.prototype.hide=function(){this.circle.remove(),this.isShow=!1},e.prototype.remove=function(){this._isInsided&&(this.circle.remove(),this._isInsided=!1)},e.prototype.delete=function(){this._isInsided&&(this.circle.remove(),this._isInsided=!1),this.layer&&this.layer.remove(this)},e.prototype.setSymbol=function(t){this.symbol=t,this.symbol&&this.symbol.strokeColor&&this.circle.setStrokeColor(this.symbol.strokeColor),this.symbol&&this.symbol.fillOpacity&&this.circle.setFillOpacity(this.symbol.fillOpacity),this.symbol&&this.symbol.strokeOpacity&&this.circle.setStrokeOpacity(this.symbol.strokeOpacity),this.symbol&&this.symbol.strokeDashArray&&this.circle.setStrokeDashArray(this.symbol.strokeDashArray),this.symbol&&this.symbol.ay&&this.circle.ay(this.symbol.ay)},e.prototype.setGeometry=function(t){this._geometry=t,this.circle.setCenter(t.center),this.circle.setRadius(t.radius)},e.prototype.addTo=function(t){this._isInsided=!0,this.circle.addTo(t)},e}(a9272.EventProvider),a9272.MinemapCircleGraphic=a9273,a9292=flagwind||(flagwind={}),a9293=function(){function t(t,e){this.businessLayer=t,this.draggingFlag=!1,this.cursorOverPointFlag=!1,this.options=__assign({EDIT_LAYER_OPTIONS:a9292.EDIT_LAYER_OPTIONS},e)}return Object.defineProperty(t.prototype,"map",{get:function(){return this.businessLayer.flagwindMap.map},enumerable:!0,configurable:!0}),t.prototype.registerEvent=function(t){var e=this;t.on("onMouseOver",function(t){console.log("test---\x3eonMouseOver"),e.cursorOverPointFlag=!0,e.map.dragPan.disable()}),t.on("onMouseOut",function(t){console.log("test---\x3eonMouseOut"),e.cursorOverPointFlag=!1,e.map.dragPan.enable()}),t.on("onMouseDown",function(t){e.cursorOverPointFlag&&(e.draggingFlag=!0,console.log("test---\x3eonMouseDown"),window._editLayer=e,console.log("test---\x3emap.on.mousemove"),e.map.on("mousemove",e.mouseMovePoint))}),t.on("onMouseUp",function(t){console.log("test---\x3eonMouseUp"),e.draggingFlag&&(e.draggingFlag=!1,console.log("test---\x3emap.off.mousemove"),e.map.off("mousemove",e.mouseMovePoint),window._editLayer=null,e.updatePoint(e))})},t.prototype.updatePoint=function(t){var e=confirm("\u786e\u5b9a\u8981\u66f4\u65b0\u5750\u6807\u4e3ax:"+t.graphic.geometry.x+",y:"+t.graphic.geometry.y);e?(this.businessLayer.getGraphicById(this.graphic.attributes.id).setGeometry(new a9292.MinemapPoint(this.graphic.geometry.x,this.graphic.geometry.y)),this.options.onEditInfo(t.graphic.attributes.id,t.graphic.geometry.x,t.graphic.geometry.y,e)):this.cancelEdit(this.graphic.attributes.id)},t.prototype.mouseMovePoint=function(t){var e=window._editLayer;if(e&&(console.log("test--\x3estatus  over:"+e.cursorOverPointFlag+".drag:"+e.draggingFlag),e.draggingFlag)){console.log("test--\x3eupdate  x:"+t.lngLat.lng+".y:"+t.lngLat.lat);var i=new a9292.MinemapPoint(t.lngLat.lng,t.lngLat.lat);e.graphic.geometry=i}},t.prototype.activateEdit=function(t){var e=this.businessLayer.getGraphicById(t);e&&(this.graphic=e.clone(e.id+"_copy")),this.businessLayer.hide(),this.graphic.addTo(this.map),this.registerEvent(this.graphic)},t.prototype.cancelEdit=function(t){this.graphic.remove(),this.map.off("mousemove",this.mouseMovePoint),this.businessLayer.show(),this.map.dragPan.enable(),this.cursorOverPointFlag=!1,this.draggingFlag=!1},t.prototype.onChanged=function(t,e){return new Promise(function(t,e){t(!0)})},t}(),a9292.MinemapEditLayer=a9293,a9331=flagwind||(flagwind={}),a9332=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.addListener=function(t,e,i,n){this.layer.addListener(t,e,i,n)},e.prototype.removeListener=function(t,e,i){this.layer.removeListener(t,e,i)},e.prototype.hasListener=function(t){return this.layer.hasListener(t)},e.prototype.dispatchEvent=function(t,e){return this.layer.dispatchEvent(t,e)},e.prototype.onCreateGraphicsLayer=function(t){return new a9331.MinemapGraphicsLayer(t)},e}(a9331.FlagwindGroupLayer),a9331.MinemapGroupLayer=a9332,a9354=flagwind||(flagwind={}),a9355=function(){function t(t,e){this.flagwindMap=t,this.isShow=!1,this.options=e,this.chartOptions={GLMap:{roam:!0},coordinateSystem:"GLMap",title:{text:e.title||"\u70ed\u529b\u56fe\u5c55\u793a",subtext:"",left:"center",textStyle:{color:"#fff"}},tooltip:{trigger:"item"},visualMap:{show:!1,top:"top",min:0,max:10,seriesIndex:0,calculable:!0,inRange:{color:["blue","blue","green","yellow","red"]}},series:[{type:"heatmap",data:[],coordinateSystem:"GLMap",pointSize:8,blurSize:12}]}}return Object.defineProperty(t.prototype,"echartslayer",{get:function(){return null==this._echartslayer&&(this._echartslayer=minemap.Template.create({map:this.flagwindMap.map,type:"heatmap"})),this._echartslayer},enumerable:!0,configurable:!0}),t.prototype.resize=function(){this.echartslayer.resize()},t.prototype.clear=function(){this.chartOptions.series[0].data=[],this.echartslayer.chart.setOption(this.chartOptions)},t.prototype.show=function(){this.isShow=!0,this.echartslayer._container.style.display=""},t.prototype.hide=function(){this.isShow=!1,this.echartslayer._container.style.display="none"},t.prototype.showDataList=function(t){this.chartOptions.series[0].data=this.changeStandardData(t),this.echartslayer.chart.setOption(this.chartOptions)},t.prototype.changeStandardData=function(t){var e=[];return t.forEach(function(t){t instanceof Array&&"number"==typeof t[0]&&"number"==typeof t[1]?e.push(t):(t.x||t.lon)&&(t.y||t.lat)&&t.count&&e.push([t.x||t.lon,t.y||t.lat,t.count])}),e},t}(),a9354.MinemapHeatmapLayer=a9355,a9374=flagwind||(flagwind={}),a9375=function(t){function e(e){var i=t.call(this,null)||this;return i.kind="label",i.id=e.id,i.attributes=e.attributes,i.symbol=e.symbol,e.point&&(i._geometry=new a9374.MinemapPoint(e.point.x,e.point.y)),e.geometry&&(i._geometry=e.geometry),i.label=new minemap.Symbol([i._geometry.x,i._geometry.y],e.symbol),i}return __extends(e,t),Object.defineProperty(e.prototype,"isInsided",{get:function(){return this._isInsided},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry=t,this.label.setPoint([t.x,t.y])},enumerable:!0,configurable:!0}),e.prototype.show=function(){if(!this.layer)throw new a9374.Exception("\u8be5\u8981\u7d20\u6ca1\u6709\u6dfb\u52a0\u5230\u56fe\u5c42\u4e0a\uff0c\u82e5\u60f3\u663e\u793a\u8be5\u8981\u7d20\u8bf7\u8c03\u7528addToMap\u65b9\u6cd5");this.label.addTo(this.layer.map),this.isShow=!1},e.prototype.hide=function(){this.label.remove(),this.isShow=!1},e.prototype.remove=function(){this._isInsided&&(this.label.remove(),this._isInsided=!1)},e.prototype.delete=function(){this._isInsided&&(this.label.remove(),this._isInsided=!1),this.layer&&this.layer.remove(this)},e.prototype.setSymbol=function(t){this.symbol=t,this.symbol&&this.symbol.textColor&&this.label.setTextColor(this.symbol.textColor),this.symbol&&this.symbol.textOffset&&this.label.setTextOffset(this.symbol.textOffset),this.symbol&&this.symbol.text&&this.label.setText(this.symbol.text),this.symbol&&this.symbol.icon&&this.label.setIcon(this.symbol.icon),this.symbol&&this.symbol.symbolSize&&this.label.setSymbolSize(this.symbol.symbolSize),this.symbol&&this.symbol.opacity&&this.label.setOpacity(this.symbol.opacity)},e.prototype.setGeometry=function(t){this._geometry=t,this.label.setPoint([t.x,t.y])},e.prototype.addTo=function(t){this._isInsided=!0,this.label.addTo(t)},e}(a9374.EventProvider),a9374.MinemapLabelGraphic=a9375,function(t){var e=function(){return function(t,e){this.type=t,this.spatial=e}}();t.MinemapGeometry=e;var i=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,"Polyline",e)||this;return i.path=[],i}return __extends(e,t),e.prototype.getPoint=function(t){return this.path[t]},e.prototype.insertPoint=function(t,e){this.path.splice(t,0,e)},e.prototype.removePoint=function(t){this.path.splice(t,1)},e.prototype.toJson=function(){return{type:"geojson",data:{type:"Feature",properties:this.attributes||{},geometry:{type:"LineString",coordinates:this.path}}}},e}(e);t.MinemapPolyline=i;var n=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,"Line",e)||this;return i.rings=[],i}return __extends(e,t),e.prototype.addRing=function(t){this.rings.push(t)},e.prototype.removeRing=function(t){if(t>this.rings.length)throw new Error("\u6570\u7ec4\u8d8a\u754c");this.rings=this.rings.splice(t,1)},e.prototype.getPoint=function(t,e){if(t>this.rings.length)throw new Error("\u6570\u7ec4\u8d8a\u754c");return this.rings[t][e]},e.prototype.insertPoint=function(t,e,i){if(t>this.rings.length)throw new Error("\u6570\u7ec4\u8d8a\u754c");this.rings[t].splice(e,0,i)},e.prototype.removePoint=function(t,e){if(t>this.rings.length)throw new Error("\u6570\u7ec4\u8d8a\u754c");this.rings[t].splice(e,1)},e.prototype.inside=function(t){for(var e=t[0],i=t[1],n=this.rings[0],o=!1,r=0,a=n.length-1;r<n.length;a=r++){var s=n[r][0],l=n[r][1],p=n[a][0],h=n[a][1];l>i!=h>i&&e<(p-s)*(i-l)/(h-l)+s&&(o=!o)}return o},e.prototype.toJson=function(){return{type:"geojson",data:{type:"Feature",properties:this.attributes||{},geometry:{type:"Polygon",coordinates:this.rings}}}},e}(e);t.MinemapPolygon=n;var o=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,"Circle",e)||this;return i.center=[],i}return __extends(e,t),e.prototype.toJson=function(){return{type:"geojson",data:{type:"Feature",properties:this.attributes||{radius:this.radius},geometry:{type:"Point",coordinates:this.center}}}},e.prototype.inside=function(t){var e=new r(this.center[0],this.center[1]),i=new r(t[0],t[1]);return turf.distance(e.toJson(),i.toJson(),"meters")<=this.radius},e}(e);t.MinemapCircle=o;var r=function(t){function e(e,i,n){void 0===n&&(n=null);var o=t.call(this,"Point",n)||this;return o.x=e,o.y=i,o.spatial=n,o}return __extends(e,t),e.prototype.toJson=function(){return{type:"Feature",properties:this.attributes||{},geometry:{type:"Point",coordinates:[this.x,this.y]}}},e}(e);t.MinemapPoint=r;var a=function(){return function(t){this.wkid=t}}();t.MinemapSpatial=a;var s=function(e){function i(i){var n=e.call(this)||this;return n.options=i,n.GRAPHICS_MAP=new t.Map,n._isInsided=!1,n.id=i.id,n}return __extends(i,e),Object.defineProperty(i.prototype,"isInsided",{get:function(){return this._isInsided},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"graphics",{get:function(){return 0===this.GRAPHICS_MAP.size?new Array:this.GRAPHICS_MAP.values()},enumerable:!0,configurable:!0}),i.prototype.on=function(t,e,i,n){void 0===i&&(i=this),void 0===n&&(n=!1),this.addListener(t,e,i,n)},i.prototype.off=function(t,e,i){void 0===i&&(i=this),this.removeListener(t,e,i)},i.prototype.show=function(){this.GRAPHICS_MAP.forEach(function(t){t.value.isShow||t.value.show()})},i.prototype.hide=function(){this.GRAPHICS_MAP.forEach(function(t){t.value.isShow&&t.value.hide()})},i.prototype.remove=function(t){this.GRAPHICS_MAP.delete(t.attributes.id),t.isInsided&&t.delete()},i.prototype.clear=function(){this.GRAPHICS_MAP.forEach(function(t){return t.value.remove()}),this.GRAPHICS_MAP.clear()},i.prototype.add=function(t){this.GRAPHICS_MAP.set(t.attributes.id,t),t.layer=this,this.map&&t.addTo(this.map)},i.prototype.addToMap=function(t){this.map||this.GRAPHICS_MAP.forEach(function(e){e.value.addTo(t)}),this.map=t,this._isInsided=!0},i.prototype.removeFromMap=function(t){this.GRAPHICS_MAP.forEach(function(t){t.value.remove()}),this._isInsided=!1},i}(t.EventProvider);t.MinemapGraphicsLayer=s}(flagwind||(flagwind={})),a9523=flagwind||(flagwind={}),a9524=function(t){function e(e,i){var n=t.call(this,i)||this;return n.flagwindMap=e,n.options=__assign({},a9523.LOCATION_LAYER_OPTIONS,n.options),n.addToMap(e.map),n.registerEvent(),n}return __extends(e,t),e.prototype.registerEvent=function(){var t=this;this.flagwindMap.on("onClick",function(e){t.point=new a9523.MinemapPoint(e.data.lngLat.lng,e.data.lngLat.lat),t.locate()},this)},e.prototype.locate=function(){this.clear();var t=new a9523.MinemapMarkerGraphic({id:"flagwind_map_location",type:"Point",geometry:this.point,symbol:{className:"flagwind-map-location"}});t.element.innerHTML="<div class='breathing'><div class='pulse'></div></div>",this.add(t),this.options.onMapClick({point:this.point})},e}(a9523.MinemapGraphicsLayer),a9523.MinemapLocationLayer=a9524,a9539=flagwind||(flagwind={}),a9540=function(t){function e(e,i,n){var o=t.call(this,e,i,n)||this;return o.mapSetting=e,o.mapEl=i,o.onInit(),o}return __extends(e,t),e.prototype.onCenterAt=function(t){this.innerMap.flyTo({center:[t.x,t.y]})},e.prototype.onCreatePoint=function(t){return new a9539.MinemapPoint(t.x,t.y,t.spatial||this.spatial)},e.prototype.onCreateMap=function(){minemap.domainUrl="http://"+this.mapSetting.mapDomain,minemap.spriteUrl="http://"+this.mapSetting.mapDomain+"/minemapapi/"+this.mapSetting.mapVersion+"/sprite/sprite",minemap.serviceUrl="http://"+this.mapSetting.mapDomain+"/service",minemap.accessToken=this.mapSetting.accessToken||"25cc55a69ea7422182d00d6b7c0ffa93",minemap.solution=this.mapSetting.wkid||2365;var t=new minemap.Map({container:this.mapEl,style:"http://"+this.mapSetting.mapDomain+"/service/solu/style/id/"+minemap.solution,center:this.mapSetting.center||[116.46,39.92],zoom:this.mapSetting.zoom,pitch:0,maxZoom:this.mapSetting.maxZoom||17,minZoom:this.mapSetting.minZoom||9});this.spatial=new a9539.MinemapSpatial(minemap.solution);var e=new minemap.Popup({closeOnClick:!1,closeButton:!0,offset:[-10,-35]});t.infoWindow=e,e.addTo(t);var i=this.tooltipElement=document.createElement("div");i.id="flagwind-map-tooltip",i.classList.add("flagwind-map-tooltip"),t._container.appendChild(i),this.innerMap=t;var n=this;return t.on("load",function(t){n.dispatchEvent("onLoad",t)}),t.on("click",function(t){n.dispatchEvent("onClick",t)}),t.on("dbclick",function(t){n.dispatchEvent("onDbClick",t)}),t.on("mouseout",function(t){n.dispatchEvent("onMouseOut",t)}),t.on("mousedown",function(t){n.dispatchEvent("onMouseDown",t)}),t.on("mousemove",function(t){n.dispatchEvent("onMouseMove",t)}),t.on("mouseup",function(t){n.dispatchEvent("onMouseUp",t)}),t.on("movestart",function(t){n.dispatchEvent("onMoveStart",t)}),t.on("move",function(t){n.dispatchEvent("onMove",t)}),t.on("moveend",function(t){n.dispatchEvent("onMoveEnd",t)}),t},e.prototype.onShowInfoWindow=function(t){if(this.innerMap.infoWindow&&this.innerMap.infoWindow.remove(),t.options){var e=t.options,i={};"boolean"==typeof e.closeButton&&(i.closeButton=e.closeButton),"boolean"==typeof e.closeOnClick&&(i.closeOnClick=e.closeOnClick),e.offset&&(i.offset=e.offset),i=__assign({closeOnClick:!1,closeButton:!0,offset:[-10,-35]},i),this.innerMap.infoWindow=new minemap.Popup(i)}else this.innerMap.infoWindow=new minemap.Popup({closeOnClick:!1,closeButton:!0,offset:[-10,-35]});if(this.innerMap.infoWindow.addTo(this.innerMap),t.context)switch(t.context.type){case"dom":this.innerMap.infoWindow.setDOMContent(document.getElementById(t.context.content)||"");break;case"html":this.innerMap.infoWindow.setHTML("<h4 class='info-window-title'>"+t.context.title+"</h4><div class='info-window-content'>"+t.context.content+"</div>");break;case"text":this.innerMap.infoWindow.setText(t.context.content||"");break;default:this.innerMap.infoWindow.setHTML("<h4 class='info-window-title'>"+t.context.title+"</h4><div class='info-window-content'>"+t.context.content+"</div>")}this.innerMap.infoWindow.setLngLat([t.graphic.geometry.x,t.graphic.geometry.y]);var n=document.querySelector(".minemap-map .minemap-popup");n&&(n.style.height=n.offsetHeight)},e.prototype.onCloseInfoWindow=function(){this.innerMap.infoWindow&&this.innerMap.infoWindow.remove()},e.prototype.onCreateBaseLayers=function(){var t=new Array;return this.baseLayers=t,t},e.prototype.onShowTooltip=function(t){var e=t.attributes,i=t.geometry,n=this.innerMap.project([i.x,i.y]),o=e.name;this.tooltipElement.innerHTML="<div>"+o+"</div>",this.tooltipElement.style.left=n.x+8+"px",this.tooltipElement.style.top=n.y+8+"px",this.tooltipElement.style.display="block"},e.prototype.onHideTooltip=function(t){this.tooltipElement.style.display="none"},e.prototype.onCreateContextMenu=function(t){this.options.onCreateContextMenu&&this.options.onCreateContextMenu(t)},e}(a9539.FlagwindMap),a9539.MinemapMap=a9540,a9597=flagwind||(flagwind={}),a9598=function(t){function e(e){var i=t.call(this)||this;return i._kind="marker",i._isInsided=!1,i.isShow=!0,i.id=e.id,i.symbol=e.symbol?e.symbol:{},i.attributes=e.attributes?e.attributes:{},i.icon=e.icon,!i.icon&&i.symbol.imageUrl&&(i.icon=new minemap.Icon({imageUrl:i.symbol.imageUrl})),i.marker=new minemap.Marker(i.icon,{offset:[-10,-14]}),i.element=i.marker.getElement(),e.point&&(i.geometry=new a9597.MinemapPoint(e.point.x,e.point.y)),e.geometry&&(i.geometry=e.geometry),e&&e.className&&(i.addClass(e.className),i.symbol.className=""),e.symbol&&e.symbol.className&&(i.addClass(e.symbol.className),i.symbol.className=""),i}return __extends(e,t),e.prototype.addClass=function(t){if(this.symbol.className=t," "!==t&&null!==t&&void 0!==t)for(var e=t.split(" "),i=0;i<e.length;i++)this.marker.getElement().classList.add(e[i])},e.prototype.removeClass=function(t){if(" "!==t&&null!==t&&void 0!==t)for(var e=t.split(" "),i=0;i<e.length;i++)this.marker.getElement().classList.remove(e[i])},e.prototype.clone=function(t){return new e({id:t,symbol:this.symbol,attributes:this.attributes,point:this.geometry})},Object.defineProperty(e.prototype,"kind",{get:function(){return this._kind},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInsided",{get:function(){return this._isInsided},enumerable:!0,configurable:!0}),e.prototype.on=function(t,e,i,n){void 0===i&&(i=this),void 0===n&&(n=!1),this.addListener(t,e,i,n)},e.prototype.off=function(t,e,i){void 0===i&&(i=this),this.removeListener(t,e,i)},e.prototype.show=function(){if(!this.layer)throw new a9597.Exception("\u8be5\u8981\u7d20\u6ca1\u6709\u6dfb\u52a0\u5230\u56fe\u5c42\u4e0a\uff0c\u82e5\u60f3\u663e\u793a\u8be5\u8981\u7d20\u8bf7\u8c03\u7528addToMap\u65b9\u6cd5");this.addTo(this.layer.map),this.isShow=!0},e.prototype.hide=function(){this.marker.remove(),this.isShow=!1},e.prototype.remove=function(){this._isInsided&&(this.marker.remove(),this._isInsided=!1)},e.prototype.delete=function(){this._isInsided&&(this.marker.remove(),this._isInsided=!1),this.layer&&this.layer.remove(this)},e.prototype.setAngle=function(t){this.marker.getElement().style.transform="rotate("+t+"deg)",this.marker.getElement().style["-ms-transform"]="rotate("+t+"deg)",this.marker.getElement().style["-moz-transform"]="rotate("+t+"deg)",this.marker.getElement().style["-webkit-transform"]="rotate("+t+"deg)",this.marker.getElement().style["-o-transform"]="rotate("+t+"deg)";var e=this.marker.getElement().querySelector(".graphic-moving .minemap-icon");e&&(e.style.transform="rotate("+t+"deg)")},e.prototype.setSymbol=function(t){t.className&&(this.symbol&&this.symbol.className&&this.removeClass(this.symbol.className),this.addClass(t.className)),t.icon&&this.marker.setIcon(t.icon),t.imageUrl&&this.icon.setImageUrl(t.imageUrl),t.title&&this.marker.setTitle(t.title),t.titleFontSize&&this.marker.setTitleFontSize(t.titleFontSize),t.titleColor&&this.marker.setTitleColor(t.titleColor),t.titleColor&&this.marker.setTitleColor(t.titleColor),t.titlePosition&&this.marker.setTitlePosition(t.titlePosition),this.symbol=__assign({},this.symbol,t)},e.prototype.draw=function(){console.log("draw")},Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry=t,this.marker.setLngLat([t.x,t.y])},enumerable:!0,configurable:!0}),e.prototype.setGeometry=function(t){if(!(t instanceof a9597.MinemapPoint))throw new Error("\u4e0d\u5339\u914d\u7c7b\u578b");this.geometry=t},e.prototype.addTo=function(t){this._isInsided=!0,this.marker.addTo(t);var e=this;this.marker.on("mouseover",function(t){console.log("fire marker onMouseOver"),e.fireEvent("onMouseOver",{graphic:e,mapPoint:e.geometry,orgion:t})}),this.marker.on("mouseout",function(t){console.log("fire marker onMouseOut"),e.fireEvent("onMouseOut",{graphic:e,mapPoint:e.geometry,orgion:t})}),this.marker.on("mouseup",function(t){console.log("fire marker onMouseUp"),e.fireEvent("onMouseUp",{graphic:e,mapPoint:e.geometry,orgion:t})}),this.marker.on("mousedown",function(t){console.log("fire marker onMouseDown"),e.fireEvent("onMouseDown",{graphic:e,mapPoint:e.geometry,orgion:t})}),this.marker.on("dblclick",function(t){console.log("fire marker onClick"),e.fireEvent("onDblClick",{graphic:e,mapPoint:e.geometry,orgion:t})}),this.marker.on("click",function(t){console.log("fire marker onClick"),e.fireEvent("onClick",{graphic:e,mapPoint:e.geometry,orgion:t})})},e.prototype.fireEvent=function(t,e){this.dispatchEvent(t,e),this.layer&&this.layer.dispatchEvent(t,e)},e}(a9597.EventProvider),a9597.MinemapMarkerGraphic=a9598,a9661=flagwind||(flagwind={}),a9662=function(t){function e(e,i,n,o){var r=t.call(this,i,n,o)||this;return r.businessService=e,r.isLoading=!1,r.onInit(),r}return __extends(e,t),e.prototype.onCreateGraphicsLayer=function(t){return new a9661.MinemapGraphicsLayer(t)},e.prototype.openInfoWindow=function(t,e,i){var n=this.getGraphicById(t);e?this.flagwindMap.onShowInfoWindow({graphic:n,context:e,options:i}):this.onShowInfoWindow({graphic:n})},e.prototype.onShowInfoWindow=function(t){var e=this.businessService.getInfoWindowContext(t.graphic.attributes);this.flagwindMap.onShowInfoWindow({graphic:t.graphic,context:{type:"html",title:e.title,content:e.content}})},e.prototype.onChangeStandardModel=function(t){return this.businessService.changeStandardModel(t)},e.prototype.getImageUrl=function(t){if(null==t.selected)return this.options.imageUrl||this.options.symbol.imageUrl;var e=(this.options.imageUrl||this.options.symbol.imageUrl).split(".");return t.selected?e[0]+"_checked."+e[1]:e[0]+"_unchecked."+e[1]},e.prototype.getClassName=function(t){return null==t.selected?"":t.selected?"checked":"unchecked"},e.prototype.onCreatGraphicByModel=function(t){var e=this.options.symbol.className||"graphic-tollgate",i=this.options.symbol.imageUrl||this.options.imageUrl;return new a9661.MinemapMarkerGraphic({id:t.id,className:e,symbol:{imageUrl:i},point:{y:this.getPoint(t).y,x:this.getPoint(t).x},attributes:t})},e.prototype.onUpdateGraphicByModel=function(t){var e=this.getGraphicById(t.id);e&&(e.geometry=new a9661.MinemapPoint(t.longitude,t.latitude),this.setGraphicStatus(e))},e.prototype.showDataList=function(){var t=this;return t.isLoading=!0,t.fireEvent("showDataList",{action:"start"}),this.businessService.getDataList().then(function(e){t.isLoading=!1,t.saveGraphicList(e),t.fireEvent("showDataList",{action:"end",attributes:e})}).catch(function(e){t.isLoading=!1,console.log("\u52a0\u8f7d\u5361\u53e3\u6570\u636e\u65f6\u53d1\u751f\u4e86\u9519\u8bef\uff1a",e),t.fireEvent("showDataList",{action:"error",attributes:e})})},e.prototype.start=function(){var t=this;this.timer=setInterval(function(){t.updateStatus()},this.options.timeout||2e4)},e.prototype.stop=function(){this.timer&&clearInterval(this.timer)},e.prototype.setSelectStatus=function(t,e){var i=this;this.layer.graphics.forEach(function(t){t.attributes.selected||i.setGraphicStatus(t.attributes)}),t.selected=e,this.setGraphicStatus(t)},e.prototype.setGraphicStatus=function(t){this.getGraphicById(t.id).setSymbol({className:this.getClassName(t),imageUrl:this.getImageUrl(t)})},e.prototype.updateStatus=function(){var t=this;t.isLoading=!0,t.fireEvent("updateStatus",{action:"start"}),this.businessService.getLastStatus().then(function(e){t.isLoading=!1,t.saveGraphicList(e),t.fireEvent("updateStatus",{action:"end",attributes:e})}).catch(function(e){t.isLoading=!1,console.log("\u52a0\u8f7d\u5361\u53e3\u72b6\u6001\u65f6\u53d1\u751f\u4e86\u9519\u8bef\uff1a",e),t.fireEvent("updateStatus",{action:"error",attributes:e})})},e}(a9661.FlagwindBusinessLayer),a9661.MinemapPointLayer=a9662,a9724=flagwind||(flagwind={}),a9725=function(t){function e(e){var i=t.call(this,null)||this;return i.attributes={},i.kind="polygon",i.id=e.id,i.attributes=__assign({},i.attributes,e.attributes),i.symbol=e.symbol,i.polygon=new minemap.Polygon(e.path,i.symbol),i._geometry=new a9724.MinemapPolygon,i._geometry.addRing(e.path),i}return __extends(e,t),Object.defineProperty(e.prototype,"isInsided",{get:function(){return this._isInsided},enumerable:!0,configurable:!0}),e.prototype.show=function(){if(!this.layer)throw new a9724.Exception("\u8be5\u8981\u7d20\u6ca1\u6709\u6dfb\u52a0\u5230\u56fe\u5c42\u4e0a\uff0c\u82e5\u60f3\u663e\u793a\u8be5\u8981\u7d20\u8bf7\u8c03\u7528addToMap\u65b9\u6cd5");this.polygon.addTo(this.layer.map),this.isShow=!1},e.prototype.hide=function(){this.polygon.remove(),this.isShow=!1},e.prototype.remove=function(){this._isInsided&&(this.polygon.remove(),this._isInsided=!1)},e.prototype.delete=function(){this._isInsided&&(this.polygon.remove(),this._isInsided=!1),this.layer&&this.layer.remove(this)},e.prototype.setSymbol=function(t){this.symbol=t,this.symbol&&this.symbol.strokeColor&&this.polygon.setStrokeColor(this.symbol.strokeColor),this.symbol&&this.symbol.fillOpacity&&this.polygon.setFillOpacity(this.symbol.fillOpacity),this.symbol&&this.symbol.strokeOpacity&&this.polygon.setStrokeOpacity(this.symbol.strokeOpacity),this.symbol&&this.symbol.strokeDashArray&&this.polygon.setStrokeDashArray(this.symbol.strokeDashArray),this.symbol&&this.symbol.ay&&this.polygon.ay(this.symbol.ay)},e.prototype.setGeometry=function(t){this._geometry=t,t.rings.length>0?this.polygon.setPath(t.rings[0]):this.polygon.setPath([])},e.prototype.addTo=function(t){this._isInsided=!0,this.polygon.addTo(t)},e}(a9724.EventProvider),a9724.MinemapPolygonGraphic=a9725,a9744=flagwind||(flagwind={}),a9745=function(t){function e(e,i){var n=t.call(this,null)||this;n.attributes={},n.kind="polyline",n.layer=e,n.id=i.id,n.attributes=__assign({},n.attributes,i.attributes),n.symbol=i.symbol,i.geometry?n._geometry=i.geometry:n._geometry=new a9744.MinemapPolyline;var o=n._geometry.path;return i.path&&(o=i.path),n.polyline=new minemap.Polyline(o,n.symbol),n._geometry.path=o,n}return __extends(e,t),Object.defineProperty(e.prototype,"isInsided",{get:function(){return this._isInsided},enumerable:!0,configurable:!0}),e.prototype.show=function(){if(!this.layer)throw new a9744.Exception("\u8be5\u8981\u7d20\u6ca1\u6709\u6dfb\u52a0\u5230\u56fe\u5c42\u4e0a\uff0c\u82e5\u60f3\u663e\u793a\u8be5\u8981\u7d20\u8bf7\u8c03\u7528addToMap\u65b9\u6cd5");this.polyline.addTo(this.layer.map),this.isShow=!1},e.prototype.hide=function(){this.polyline.remove(),this.isShow=!1},e.prototype.remove=function(){this._isInsided&&(this.polyline.remove(),this._isInsided=!1)},e.prototype.delete=function(){this._isInsided&&(this.polyline.remove(),this._isInsided=!1),this.layer&&this.layer.remove(this)},e.prototype.setSymbol=function(t){this.symbol=t,this.symbol&&this.symbol.strokeColor&&this.polyline.setStrokeColor(this.symbol.strokeColor),this.symbol&&this.symbol.opacity&&this.polyline.setOpacity(this.symbol.opacity),this.symbol&&this.symbol.strokeDashArray&&this.polyline.setStrokeDashArray(this.symbol.strokeDashArray)},e.prototype.setGeometry=function(t){this._geometry=t,this.polyline.setPath(t.path)},e.prototype.addTo=function(t){this._isInsided=!0,this.polyline.addTo(t)},e}(a9744.EventProvider),a9744.MinemapPolylineGraphic=a9745,a9766=flagwind||(flagwind={}),a9767=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onSetSegmentByLine=function(t,e){if(e.polyline=t.polyline,e.length=t.length,e.polyline.path&&e.polyline.path.length>0){var i=e.options.numsOfKilometer;e.line=a9766.MapUtils.vacuate([e.polyline.path],e.length,i)}},e.prototype.onSetSegmentByPoint=function(t,e){for(var i=t.points,n=t.length||a9766.MinemapUtils.distance(i),o=e.options.numsOfKilometer,r=new a9766.MinemapPolyline,a=[],s=0;s<i.length-1;s++){var l=i[s],p=i[s+1];a9766.MapUtils.density(l,p,n*o).forEach(function(t){a.push([t.x,t.y])})}r.path=a,e.length=n,e.polyline=r,e.line=a9766.MapUtils.vacuate([e.polyline.path],e.length,o)},e.prototype.onCreateMovingLayer=function(t){return new a9766.MinemapGroupLayer({id:t,kind:"marker"})},e.prototype.onCreateLineLayer=function(t){return new a9766.MinemapGroupLayer({id:t,kind:"geojson"})},e.prototype.onEqualGraphic=function(t,e){return null!=t&&null!=e&&(t.geometry.x!==e.geometry.x||t.geometry.y!==e.geometry.y)},e.prototype.onShowSegmentLine=function(t){var e=new a9766.MinemapPolylineGraphic(this.moveLineLayer.layer,{id:t.name+"_"+t.index,geometry:t.polyline,attributes:{id:t.name+"_"+t.index},symbol:{strokeDashArray:[1,1]}});t.lineGraphic=e,this.moveLineLayer.addGraphic(t.name,e)},e.prototype.onGetStandardStops=function(t,e){var i=[];return null==e||0===e.length?i:(e.forEach(function(e){if(!(e instanceof a9766.MinemapMarkerGraphic))throw new Error("\u672a\u77e5\u7684\u505c\u9760\u70b9\u5b9a\u4e49.");e.attributes.__type="stop",e.attributes.__line=t,i.push(e)}),i)},e.prototype.onSolveByService=function(t,e,i,n){var o=t.startGraphic.geometry.x+","+t.startGraphic.geometry.y,r=t.endGraphic.geometry.x+","+t.endGraphic.geometry.y,a=null;n&&(a=n.join(","));var s=this;minemap.service.queryRouteDrivingResult3(o,r,a,2,"",function(e,i){if(e)s.errorHandler(e,t);else if(0===i.errcode&&i.data){var n=new a9766.RouteResult(i);s.solveComplete({polyline:n.getLine(s.spatial),length:n.data.rows[0].distance},t)}else s.errorHandler(i.errmsg,t)})},e.prototype.onSolveByJoinPoint=function(t){var e=[];if(e.push(t.startGraphic.geometry),t.waypoints)for(var i=0;i<t.waypoints.length;i++)e.push(t.waypoints[i].geometry);e.push(t.endGraphic.geometry),t.setMultPoints(e)},e.prototype.onCreateMoveMark=function(t,e,i){var n=new a9766.MinemapMarkerGraphic({id:t.name,symbol:{imageUrl:this.options.movingImageUrl,className:"graphic-moving"},point:e.geometry,attributes:e.attributes});t.markerGraphic=n,this.moveMarkLayer.addGraphic(t.name,n)},e.prototype.onChangeMovingGraphicSymbol=function(t,e,i){void 0!==t&&(t.markerGraphic.setAngle(360-i),t.markerGraphic.setGeometry(e))},e}(a9766.FlagwindRouteLayer),a9766.MinemapRouteLayer=a9767,function(t){var e=function(){function e(t){var e=this;console.log(t),this.success=!t.errcode,this.message=t.message,t.data&&(this.data={error:null,rows:null},t.data.error&&(this.data.error=t.data.error),t.data.rows&&(this.data.rows=[],t.data.rows.forEach(function(t){e.data.rows.push(new n(t))})))}return e.prototype.getLine=function(e){var i=new t.MinemapPolyline(e),n=[];return this.data&&this.data.rows&&this.data.rows.forEach(function(t){var i=t.getPoints(e);n=n.concat(i.map(function(t){return[t.x,t.y]}))}),i.path=n,i},e}();t.RouteResult=e;var i=function(){return function(t){t.strguide&&(this.guide=t.strguide),this.streetName=t.streetName,t.distance&&(this.distance=parseFloat(t.distance)),t.duration&&(this.duration=parseFloat(t.duration))}}();t.RouteItem=i;var n=function(){function e(e){var n=this;if(e.mapinfo){if(e.mapinfo.center){var o=e.mapinfo.center.split(",");this.center=new t.MinemapPoint(parseFloat(o[0]),parseFloat(o[1]),null)}e.mapinfo.scale&&(this.scale=parseFloat(e.mapinfo.scale))}if(e.distance&&(this.distance=parseFloat(e.distance)),e.duration&&(this.duration=parseFloat(e.duration)),e.routelatlon){this.points=[];for(var r=e.routelatlon.split(";"),a=0;a<r.length;a++)if(r[a]){o=r[a].split(",");this.points.push([parseFloat(o[0]),parseFloat(o[1])])}}e.routes&&(this.items=[],e.routes.item.forEach(function(t){n.items.push(new i(t))}))}return e.prototype.getPoints=function(e){var i=[];return this.points.forEach(function(n){i.push(new t.MinemapPoint(n[0],n[1],e))}),i},e.prototype.getLine=function(e){var i=new t.MinemapPolyline(e),n=[];return this.points.forEach(function(t){n.push([t[0],t[1]])}),i.path=n,i},e}();t.RouteRow=n}(flagwind||(flagwind={})),function(t){t.SELECT_BOX_OPTIONS={onCheckChanged:function(t){console.log("onCheckChanged")}};var e=function(e){function i(i,n){var o=e.call(this,null)||this;o.flagwindMap=i,o.options=n,o.layers=[],n=__assign({},t.SELECT_BOX_OPTIONS,n),o.options=n,o.edit=new minemap.edit.init(i.map,{boxSelect:!0,touchEnabled:!1,displayControlsDefault:!0,showButtons:!1});var r=o;return o.flagwindMap.map.on("edit.record.create",function(t){r.onCreateRecord(r,t)}),o}return __extends(i,e),i.prototype.onCreateRecord=function(e,i){var n=this,o=new t.MinemapPolygon(null);o.addRing(i.record.features[0].geometry.coordinates[0]),e.layers.forEach(function(t){var e=[];t.graphics.forEach(function(t){o.inside([t.geometry.x,t.geometry.y])&&(console.log(t),e.push(t))});var i=e.map(function(t){return t.attributes});t.setSelectStatusByModels(i,!1),n.options.onCheckChanged(i)}),e.clear()},i.prototype.addLayer=function(t){t.options.enableSelectMode=!0,this.layers.push(t)},i.prototype.deleteSelectBar=function(){var t=document.getElementById("edit-ctrl-group");t&&t.remove()},i.prototype.showSelectBar=function(){if(document.getElementById("edit-ctrl-group"))return console.log("\u7ed8\u5236\u63a7\u4ef6\u5df2\u7ecf\u521b\u5efa\uff0c\u4e0d\u53ef\u91cd\u590d\u521b\u5efa\uff01"),void(document.getElementById("edit-ctrl-group").style.display="block");var t=this,e=this.flagwindMap.map._container,i=document.createElement("div");i.setAttribute("id","edit-ctrl-group"),i.innerHTML='<div class="edit-btn" title="\u753b\u5706" data-operate="circle"><span class="iconfont icon-draw-circle"></span></div>\n                <div class="edit-btn" title="\u753b\u77e9\u5f62" data-operate="rectangle"><span class="iconfont icon-draw-square"></span></div>\n                <div class="edit-btn" title="\u753b\u591a\u8fb9\u5f62" data-operate="polygon"><span class="iconfont icon-draw-polygon1"></span></div>',e.appendChild(i);for(var n=document.querySelectorAll("#edit-ctrl-group .edit-btn"),o=0;o<n.length;o++)n[o].onclick=function(){t.active(this.dataset.operate)}},i.prototype.clear=function(){this.edit&&(this.edit.onBtnCtrlActive("trash"),this.mode="trash")},i.prototype.active=function(t){this.edit&&t&&(this.edit.onBtnCtrlActive(t),this.mode=t)},i}(t.EventProvider);t.MinemapSelectBox=e}(flagwind||(flagwind={})),a9921=flagwind||(flagwind={}),a9922=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.showTrack=function(t,e,i){var n=this.getStopsGraphicList(e);this.solveSegment(t,n,i)},e.prototype.getStopsGraphicList=function(t){var e=this,i=[];return t.forEach(function(t){(t.tollCode||t.equipmentCode)&&t.tollLatitude&&t.tollLongitude&&i.push(new a9921.MinemapMarkerGraphic({id:t.tollCode||t.equipmentCode,symbol:e.options.symbol,point:new a9921.MinemapPoint(t.tollLongitude,t.tollLatitude),attributes:t}))}),i},e}(a9921.MinemapRouteLayer),a9921.MinemapVehicleRouteLayer=a9922,a9939=flagwind||(flagwind={}),a9940=function(){return function(){this.mapDomain="minedata.cn",this.mapVersion="v1.3",this.accessToken="25cc55a69ea7422182d00d6b7c0ffa93",this.units=.03,this.center=[116.46,39.92],this.wkidFromApp=4326,this.is25D=!1,this.minZoom=9,this.maxZoom=17,this.zoom=16,this.logo=!1,this.slider=!0,this.sliderPosition="bottom-left"}}(),a9939.MinemapSetting=a9940,a9945=flagwind||(flagwind={}),a9946=function(){function t(){}return t.getLength=function(t,e){return turf.distance(t.toJson(),e.toJson(),"kilometers")},t.distance=function(e,i){void 0===i&&(i=100),null==i&&(i=e.length);var n=1;e.length>i&&(n=Math.max(Math.floor(e.length/i),1));var o=0,r=0;for(r=0;r<=e.length-n;r+=n){var a=e[r],s=e[r+n];a&&s&&(o+=t.getLength(a,s))}return r<e.length-1&&(o+=t.getLength(e[r],e[e.length-1])),o},t}(),a9945.MinemapUtils=a9946,function(flagwind){var Type=function(){function Type(){}return Type.isArray=function(t){return"array"===this.getTypeString(t)},Type.isObject=function(t){return"object"===this.getTypeString(t)},Type.isString=function(t){return"string"==typeof t},Type.isDate=function(t){return"date"===this.getTypeString(t)},Type.isRegExp=function(t){return"regexp"===this.getTypeString(t)},Type.isFunction=function(t){return"function"==typeof t},Type.isBoolean=function(t){return"boolean"==typeof t},Type.isNumber=function(t){return"number"==typeof t},Type.isNull=function(t){return null===t},Type.isUndefined=function(t){return void 0===t},Type.isEmptyObject=function(t){return Type.isNull(t)||Type.isUndefined(t)},Type.isEmptyString=function(t){return Type.isEmptyObject(t)||""===t.trim()},Type.setMetadata=function(t,e){if(!t||!e)throw new Error;this._metadatas.set(t,e)},Type.getMetadata=function(t){return this._metadatas.get(t)||null},Type.getClassType=function(value){if(Type.isNull(value))return null;if(!Type.isUndefined(value)){if(Type.isBoolean(value))return Boolean;if(Type.isNumber(value))return Number;if(!Type.isString(value)){var prototype=value.prototype?value.prototype:Object.getPrototypeOf(value);return prototype.constructor}try{var ctor=eval(value);return Type.isFunction(ctor)?ctor:String}catch(t){return String}}},Type.getClassName=function(t){var e=this.getQualifiedClassName(t).split(".");return e[e.length-1]},Type.getQualifiedClassName=function(t){var e=typeof t;if(!t||"object"!==e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var n=i.constructor.toString().trim(),o=n.indexOf("("),r=n.substring(9,o);return Object.defineProperty(i,"__class__",{value:r,enumerable:!1,writable:!0}),r},Type.getSuperclassName=function(t){var e=this.getQualifiedSuperclassName(t).split(".");return e[e.length-1]},Type.getQualifiedSuperclassName=function(t){if(!t||"object"!=typeof t&&!t.prototype)return null;var e=t.prototype?t.prototype:Object.getPrototypeOf(t),i=Object.getPrototypeOf(e);if(!i)return null;var n=this.getQualifiedClassName(i.constructor);return n||null},Type.isAssignableFrom=function(t,e){if(!t||!e)return!1;if(t===e)return!0;if(t===Object||"Object"===t)return!0;var i=e.prototype;if(i.hasOwnProperty("__types__")){var n=Type.isString(t)?t:Type.getQualifiedClassName(t);return-1!==i.__types__.indexOf(n)}var o=Object.getPrototypeOf(i).constructor;if(o===Object)return!1;if(Type.isString(t)){if(Type.getQualifiedClassName(o)===t)return!0}else if(o===t)return!0;return Type.isAssignableFrom(t,o)},Type.getTypeString=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},Type._metadatas=new flagwind.Map,Type}();flagwind.Type=Type}(flagwind||(flagwind={})),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=flagwind});